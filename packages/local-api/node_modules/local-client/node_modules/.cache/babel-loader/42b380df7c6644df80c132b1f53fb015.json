{"ast":null,"code":"import produce from \"immer\";\nimport { ActionType } from \"../action-types\";\nconst initialState = {};\n\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, draft => {\n    switch (action.type) {\n      case ActionType.BUNDLE_START:\n        // id of code cell to bundle\n        draft[action.payload.id] = {\n          loading: true,\n          code: \"\",\n          err: \"\"\n        };\n        return draft;\n\n      case ActionType.BUNDLE_COMPLETE:\n        draft[action.payload.id] = {\n          loading: false,\n          code: action.payload.bundle.code,\n          err: action.payload.bundle.err\n        };\n        return draft;\n\n      default:\n        return draft;\n    }\n  });\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:/Users/Ryzen/Desktop/jbook/src/state/reducers/bundlesReducer.ts"],"names":["produce","ActionType","initialState","reducer","state","action","draft","type","BUNDLE_START","payload","id","loading","code","err","BUNDLE_COMPLETE","bundle"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,OAApB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AAaA,MAAMC,YAA0B,GAAG,EAAnC;;AAEA,MAAMC,OAAO,GAAG,YAAsE;AAAA,MAArEC,KAAqE,uEAA/CF,YAA+C;AAAA,MAAjCG,MAAiC;AACrF,SAAOL,OAAO,CAACI,KAAD,EAASE,KAAD,IAAW;AAChC,YAAQD,MAAM,CAACE,IAAf;AACC,WAAKN,UAAU,CAACO,YAAhB;AACC;AACAF,QAAAA,KAAK,CAACD,MAAM,CAACI,OAAP,CAAeC,EAAhB,CAAL,GAA2B;AAC1BC,UAAAA,OAAO,EAAE,IADiB;AAE1BC,UAAAA,IAAI,EAAE,EAFoB;AAG1BC,UAAAA,GAAG,EAAE;AAHqB,SAA3B;AAKA,eAAOP,KAAP;;AAED,WAAKL,UAAU,CAACa,eAAhB;AACCR,QAAAA,KAAK,CAACD,MAAM,CAACI,OAAP,CAAeC,EAAhB,CAAL,GAA2B;AAC1BC,UAAAA,OAAO,EAAE,KADiB;AAE1BC,UAAAA,IAAI,EAAEP,MAAM,CAACI,OAAP,CAAeM,MAAf,CAAsBH,IAFF;AAG1BC,UAAAA,GAAG,EAAER,MAAM,CAACI,OAAP,CAAeM,MAAf,CAAsBF;AAHD,SAA3B;AAKA,eAAOP,KAAP;;AAED;AACC,eAAOA,KAAP;AAnBF;AAqBA,GAtBa,CAAd;AAuBA,CAxBD;;AA0BA,eAAeH,OAAf","sourcesContent":["import produce from \"immer\";\r\nimport { ActionType } from \"../action-types\";\r\nimport { Action } from \"../actions\";\r\n\r\ninterface BundlesState {\r\n\t[key: string]:\r\n\t\t| {\r\n\t\t\t\tloading: boolean;\r\n\t\t\t\tcode: string;\r\n\t\t\t\terr: string;\r\n\t\t\t}\r\n\t\t| undefined; // this is because, initially when a code cell is loaded up, there is no content inside which results in the createBundle action returning bundle as undefined, which in turn results in an error when previewing bundle.code beside the code cell\r\n}\r\n\r\nconst initialState: BundlesState = {};\r\n\r\nconst reducer = (state: BundlesState = initialState, action: Action): BundlesState => {\r\n\treturn produce(state, (draft) => {\r\n\t\tswitch (action.type) {\r\n\t\t\tcase ActionType.BUNDLE_START:\r\n\t\t\t\t// id of code cell to bundle\r\n\t\t\t\tdraft[action.payload.id] = {\r\n\t\t\t\t\tloading: true,\r\n\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\terr: \"\"\r\n\t\t\t\t};\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tcase ActionType.BUNDLE_COMPLETE:\r\n\t\t\t\tdraft[action.payload.id] = {\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tcode: action.payload.bundle.code,\r\n\t\t\t\t\terr: action.payload.bundle.err\r\n\t\t\t\t};\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn draft;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}