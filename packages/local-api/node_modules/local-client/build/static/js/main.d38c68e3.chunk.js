(this.webpackJsonpjbook=this.webpackJsonpjbook||[]).push([[0],{202:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},263:function(e,t,n){},571:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"updateCell",(function(){return N})),n.d(r,"deleteCell",(function(){return R})),n.d(r,"moveCell",(function(){return D})),n.d(r,"insertCellAfter",(function(){return M})),n.d(r,"createBundle",(function(){return I}));n(201),n(202);var a,c=n(27),i=n.n(c),o=n(62),s=n(49),u=n(176);!function(e){e.MOVE_CELL="move_cell",e.DELETE_CELL="delete_cell",e.INSERT_CELL_AFTER="insert_cell_after",e.UPDATE_CELL="update_cell",e.BUNDLE_START="bundle_start",e.BUNDLE_COMPLETE="bundle_complete"}(a||(a={}));var d=n(86),l={loading:!1,error:null,order:[],data:{}},p=function(){return Math.random().toString(36).substr(2,5)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(t.type){case a.UPDATE_CELL:var n=t.payload,r=n.id,c=n.content;return e.data[r].content=c,e;case a.DELETE_CELL:return delete e.data[t.payload],e.order=e.order.filter((function(e){return e!==t.payload})),e;case a.MOVE_CELL:var i=t.payload.direction,o=e.order.findIndex((function(e){return e===t.payload.id})),s="up"===i?o-1:o+1;return s<0||s>e.order.length-1||(e.order[o]=e.order[s],e.order[s]=t.payload.id),e;case a.INSERT_CELL_AFTER:var u={id:p(),type:t.payload.type,content:""};e.data[u.id]=u;var d=e.order.findIndex((function(e){return e===t.payload.id}));return-1===d?e.order.unshift(u.id):e.order.splice(d+1,0,u.id),e;default:return e}}))},j={},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(t.type){case a.BUNDLE_START:return e[t.payload.id]={loading:!0,code:"",err:""},e;case a.BUNDLE_COMPLETE:return e[t.payload.id]={loading:!1,code:t.payload.bundle.code,err:t.payload.bundle.err},e;default:return e}}))},h=Object(s.c)({cells:f,bundles:b}),v=Object(s.d)(h,{},Object(s.a)(u.a));v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:"text"}}),v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:"code"}});var m,x=n(12),O=n.n(x),E=n(24),w=n(130),y=n(131),L=n.n(y),C=n(177),g=n.n(C).a.createInstance({name:"filecache"}),_=function(e){return{name:"fetch-plugin",setup:function(t){t.onLoad({filter:/(^index\.js$)/},(function(){return{loader:"jsx",contents:e}})),t.onLoad({filter:/.*/},function(){var e=Object(E.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getItem(t.path);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.onLoad({filter:/(.css$)/},function(){var e=Object(E.a)(O.a.mark((function e(t){var n,r,a,c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get(t.path);case 2:return n=e.sent,r=n.data,a=n.request,c=r.replace(/\n/g,"").replace(/"/g,'\\"').replace(/'/g,"\\'"),i='\n\t\t\t\t\tconst style = document.createElement("style");\n\t\t\t\t\tstyle.innerText = "'.concat(c,'";\n\t\t\t\t\tdocument.head.appendChild(style);\n\t\t\t\t\t'),o={loader:"jsx",contents:i,resolveDir:new URL("./",a.responseURL).pathname},e.next=10,g.setItem(t.path,o);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.onLoad({filter:/.*/},function(){var e=Object(E.a)(O.a.mark((function e(t){var n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get(t.path);case 2:return n=e.sent,r=n.data,a=n.request,c={loader:"jsx",contents:r,resolveDir:new URL("./",a.responseURL).pathname},e.next=8,g.setItem(t.path,c);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},T=function(){var e=Object(E.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=6;break}return e.next=3,w.initialize({worker:!0,wasmURL:"https://unpkg.com/esbuild-wasm/esbuild.wasm"});case 3:m=!0,e.next=0;break;case 6:return e.prev=6,e.next=9,w.build({entryPoints:["index.js"],bundle:!0,write:!1,plugins:[{name:"unpkg-path-plugin",setup:function(e){e.onResolve({filter:/(^index\.js$)/},(function(){return{path:"index.js",namespace:"a"}})),e.onResolve({filter:/^\.+\//},function(){var e=Object(E.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{namespace:"a",path:new URL(t.path,"https://unpkg.com".concat(t.resolveDir,"/")).href});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.onResolve({filter:/.*/},function(){var e=Object(E.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{namespace:"a",path:"https://unpkg.com/".concat(t.path)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},_(t)],define:{"process.env.NODE_ENV":'"production"',global:"window"},jsxFactory:"_React.createElement",jsxFragment:"_React.Fragment"});case 9:return n=e.sent,e.abrupt("return",{code:n.outputFiles[0].text,err:""});case 13:if(e.prev=13,e.t0=e.catch(6),!(e.t0 instanceof Error)){e.next=19;break}return e.abrupt("return",{code:"",err:e.t0.message});case 19:return e.abrupt("return",{code:"",err:"An error has occurred!"});case 20:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),k=T,N=function(e,t){return{type:a.UPDATE_CELL,payload:{id:e,content:t}}},R=function(e){return{type:a.DELETE_CELL,payload:e}},D=function(e,t){return{type:a.MOVE_CELL,payload:{id:e,direction:t}}},M=function(e,t){return{type:a.INSERT_CELL_AFTER,payload:{id:e,type:t}}},I=function(e,t){return function(){var n=Object(E.a)(O.a.mark((function n(r){var c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:a.BUNDLE_START,payload:{id:e}}),n.next=3,k(t);case 3:c=n.sent,r({type:a.BUNDLE_COMPLETE,payload:{id:e,bundle:c}});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=(n(238),o.c),U=(n(239),n(0)),z=function(){var e=Object(o.b)();return Object(U.useMemo)((function(){return Object(s.b)(r,e)}),[e])},A=n(596),B=n(598),F=n(66),V=n(1),P=function(e){var t=e.previousCellId,n=e.forceVisible,r=z().insertCellAfter;return Object(V.jsx)(A.a,{horizontal:!0,section:!0,children:Object(V.jsxs)(B.a.Group,{className:"add-cell ".concat(n?"force-visible":""),compact:!0,children:[Object(V.jsxs)(B.a,{animated:"fade",className:"add-cell-button",onClick:function(){return r(t,"code")},children:[Object(V.jsx)(B.a.Content,{visible:!0,children:"Code"}),Object(V.jsx)(B.a.Content,{hidden:!0,children:Object(V.jsx)(F.a,{name:"add"})})]}),Object(V.jsxs)(B.a,{animated:"fade",className:"add-cell-button",onClick:function(){return r(t,"text")},children:[Object(V.jsx)(B.a.Content,{visible:!0,children:"Text"}),Object(V.jsx)(B.a.Content,{hidden:!0,children:Object(V.jsx)(F.a,{name:"add"})})]})]})})},H=(n(244),n(245),function(e){var t=e.id,n=z(),r=n.moveCell,a=n.deleteCell;return Object(V.jsxs)(B.a.Group,{className:"action-bar",children:[Object(V.jsx)(B.a,{className:"action-bar-button",icon:"arrow up",onClick:function(){return r(t,"up")}}),Object(V.jsx)(B.a,{className:"action-bar-button",icon:"arrow down",onClick:function(){return r(t,"down")}}),Object(V.jsx)(B.a,{className:"action-bar-button",icon:"trash alternate",onClick:function(){return a(t)}})]})}),W=(n(246),n(247),n(188)),$=n(180),J=n.n($),q=n(181),G=n.n(q),K=function(e){var t=e.initialValue,n=e.onChange,r=Object(U.useRef)(null);return Object(V.jsxs)("div",{className:"editor-wrapper",children:[Object(V.jsxs)(B.a,{icon:!0,animated:"fade",labelPosition:"right",className:"button-format",onClick:function(){var e=r.current.getValue(),t=J.a.format(e,{parser:"babel",plugins:[G.a],useTabs:!0,semi:!0}).replace(/\n$/,"");r.current.setValue(t)},children:[Object(V.jsx)(B.a.Content,{visible:!0,className:"text-center",children:Object(V.jsx)(F.a,{name:"paint brush"})}),Object(V.jsx)(B.a.Content,{hidden:!0,children:"Format"})]}),Object(V.jsx)(W.a,{onMount:function(e,t){r.current=e,e.onDidChangeModelContent((function(){n(e.getValue())}))},value:t,theme:"vs-dark",language:"javascript",height:"100%",options:{wordWrap:"on",minimap:{enabled:!1},showUnused:!1,folding:!1,lineNumbersMinChars:3,fontSize:16,scrollBeyondLastLine:!1,automaticLayout:!0}})]})},Q=(n(256),'\n    <html>\n        <head></head>\n        <body>\n            <div id="root"></div>\n            <script>\n\t\t\t\tconst handleError = (err) => {\n\t\t\t\t\tconst root = document.getElementById("root");\n\t\t\t\t\troot.innerHTML = \'<div style="color: red;"><h4>Runtime Error</h4>\' + err + \'</div>\';\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t};\n\t\t\t\twindow.addEventListener("error", (event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleError(event.error);\n\t\t\t\t});\n                window.addEventListener("message", (event) => {\n                    try {\n                        eval(event.data);\n                    } catch (err) {\n                        handleError(err);\n                    }\n                }, false)\n            <\/script>\n        </body>\n    </html>\n'),X=function(e){var t=e.code,n=e.bundleError,r=Object(U.useRef)();return Object(U.useEffect)((function(){r.current.srcdoc=Q,setTimeout((function(){r.current.contentWindow.postMessage(t,"*")}),50)}),[t]),Object(V.jsxs)("div",{className:"preview-wrapper",children:[Object(V.jsx)("iframe",{title:"code preview",ref:r,sandbox:"allow-scripts",srcDoc:Q}),n&&Object(V.jsxs)("div",{className:"preview-error",children:[Object(V.jsx)("h3",{children:"Compilation Error"}),n]})]})},Y=n(11),Z=n(20),ee=(n(257),n(182)),te=function(e){var t,n=e.direction,r=e.children,a=Object(U.useState)(window.innerWidth),c=Object(Z.a)(a,2),i=c[0],o=c[1],s=Object(U.useState)(window.innerHeight),u=Object(Z.a)(s,2),d=u[0],l=u[1],p=Object(U.useState)(.75*window.innerWidth),f=Object(Z.a)(p,2),j=f[0],b=f[1];return Object(U.useEffect)((function(){var e,t=function(){e&&clearTimeout(e),e=setTimeout((function(){o(window.innerWidth),l(window.innerHeight),.75*window.innerWidth<j&&b(.75*window.innerWidth)}),100)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[j]),t="horizontal"===n?{className:"resize-horizontal",width:j,height:1/0,resizeHandles:["e"],maxConstraints:[.75*i,1/0],minConstraints:[.2*i,1/0],onResizeStop:function(e,t){b(t.size.width)}}:{width:1/0,height:400,resizeHandles:["s"],maxConstraints:[1/0,.9*d],minConstraints:[1/0,100]},Object(V.jsx)(ee.ResizableBox,Object(Y.a)(Object(Y.a)({},t),{},{children:r}))},ne=n(599),re=n(597),ae=n(183),ce=function(e){var t,n=e.cell,r=z(),a=r.updateCell,c=r.createBundle,i=S((function(e){return e.bundles[n.id]})),o=(t=n.id,S((function(e){var n,r=e.cells,a=r.data,c=r.order.map((function(e){return a[e]})),i=[],o=Object(ae.a)(c);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("code"===s.type&&(s.id===t?i.push('\n        import _React from "react";\n        import _ReactDOM from "react-dom";\n        var show = (value) => {\n            const root = document.getElementById("root");\n            if (typeof value === "object") {\n                if (value.$$typeof && value.props) {\n                    _ReactDOM.render(value, root)\n                } else {\n                    root.innerHTML = JSON.stringify(value)\n                }\n            } else {\n                root.innerHTML = value;\n            }\n        };\n        '):i.push("var show = () => {}"),i.push(s.content)),s.id===t)break}}catch(u){o.e(u)}finally{o.f()}return i})).join("\n"));return Object(U.useEffect)((function(){var e=setTimeout(Object(E.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(n.id,o);case 1:case"end":return e.stop()}}),e)}))),750);return function(){clearTimeout(e)}}),[n.id,o,c]),Object(V.jsx)(te,{direction:"vertical",children:Object(V.jsxs)("div",{style:{height:"calc(100% - 10px)",display:"flex",flexDirection:"row"},children:[Object(V.jsx)(te,{direction:"horizontal",children:Object(V.jsx)(K,{initialValue:n.content,onChange:function(e){return a(n.id,e)}})}),!i||i.loading?Object(V.jsx)(ne.a,{children:Object(V.jsx)(re.a,{active:!0,indeterminate:!0,children:"Loading..."})}):Object(V.jsx)(X,{code:i.code,bundleError:i.err})]})})},ie=(n(263),n(134)),oe=function(e){var t=e.cell,n=Object(U.useRef)(null),r=Object(U.useState)(!1),a=Object(Z.a)(r,2),c=a[0],i=a[1],o=z().updateCell;return Object(U.useEffect)((function(){var e=function(e){n.current&&e.target&&n.current.contains(e.target)||i(!1)};return document.addEventListener("click",e,{capture:!0}),function(){document.removeEventListener("click",e,{capture:!0})}}),[]),c?Object(V.jsx)("div",{className:"text-editor",ref:n,children:Object(V.jsx)(ie.a,{value:t.content,onChange:function(e){return o(t.id,e||"")},autoFocus:!0})}):Object(V.jsx)(ne.a,{className:"text-editor",onClick:function(){return i(!0)},children:Object(V.jsx)("div",{className:"card-content",children:Object(V.jsx)(ie.a.Markdown,{source:t.content||"*Click to edit*"})})})},se=function(e){var t=e.cell;return Object(V.jsxs)("div",{className:"cell-list-item",children:[Object(V.jsx)("div",{className:"action-bar-wrapper",children:Object(V.jsx)(H,{id:t.id})}),"code"===t.type?Object(V.jsx)(ce,{cell:t}):Object(V.jsx)(oe,{cell:t})]})},ue=function(){var e=S((function(e){var t=e.cells,n=t.order,r=t.data;return n.map((function(e){return r[e]}))})),t=e.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(se,{cell:e}),Object(V.jsx)(P,{previousCellId:e.id})]},e.id)}));return Object(V.jsxs)("div",{className:"cell-list",children:[Object(V.jsx)(P,{forceVisible:0===e.length,previousCellId:null}),t]})},de=function(){return Object(V.jsx)(o.a,{store:v,children:Object(V.jsx)("div",{children:Object(V.jsx)(ue,{})})})};i.a.render(Object(V.jsx)(de,{}),document.getElementById("root"))}},[[571,1,2]]]);
//# sourceMappingURL=main.d38c68e3.chunk.js.map