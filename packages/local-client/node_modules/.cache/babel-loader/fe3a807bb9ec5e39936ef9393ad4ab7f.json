{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"prefixCls\"];\nimport React, { useContext, useEffect } from 'react';\nimport { EditorContext } from '../../Context';\nimport { TextAreaCommandOrchestrator } from '../../commands';\nimport handleKeyDown from './handleKeyDown';\nimport shortcuts from './shortcuts';\nimport \"./index.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function Textarea(props) {\n  var {\n    prefixCls\n  } = props,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var {\n    markdown,\n    commands,\n    fullscreen,\n    preview,\n    highlightEnable,\n    extraCommands,\n    tabSize,\n    onChange: _onChange,\n    dispatch\n  } = useContext(EditorContext);\n  var textRef = React.useRef(null);\n  var executeRef = React.useRef();\n  var statesRef = React.useRef({\n    fullscreen,\n    preview\n  });\n  useEffect(() => {\n    statesRef.current = {\n      fullscreen,\n      preview,\n      highlightEnable\n    };\n  }, [fullscreen, preview, highlightEnable]);\n  useEffect(() => {\n    if (textRef.current && dispatch) {\n      var commandOrchestrator = new TextAreaCommandOrchestrator(textRef.current);\n      executeRef.current = commandOrchestrator;\n      dispatch({\n        textarea: textRef.current,\n        commandOrchestrator\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  var onKeyDown = e => {\n    handleKeyDown(e, tabSize);\n    shortcuts(e, [...(commands || []), ...(extraCommands || [])], executeRef.current, dispatch, statesRef.current);\n  };\n\n  useEffect(() => {\n    if (textRef.current) {\n      textRef.current.addEventListener('keydown', onKeyDown);\n    }\n\n    return () => {\n      if (textRef.current) {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        textRef.current.removeEventListener('keydown', onKeyDown);\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsx(\"textarea\", _extends({\n    autoComplete: \"off\",\n    autoCorrect: \"off\",\n    autoCapitalize: \"off\",\n    spellCheck: false\n  }, other, {\n    ref: textRef,\n    className: prefixCls + \"-text-input \" + (other.className ? other.className : ''),\n    value: markdown,\n    onChange: e => {\n      dispatch && dispatch({\n        markdown: e.target.value\n      });\n      _onChange && _onChange(e.target.value);\n    }\n  }));\n}","map":{"version":3,"sources":["../../../src/components/TextArea/Textarea.tsx"],"names":["prefixCls","other","onChange","dispatch","useContext","textRef","React","executeRef","statesRef","preview","useEffect","highlightEnable","commandOrchestrator","textarea","onKeyDown","e","handleKeyDown","shortcuts","commands","extraCommands","markdown","value"],"mappings":";;;AAAA,OAAA,KAAA,IAAA,UAAA,EAAA,SAAA,QAAA,OAAA;AAEA,SAAA,aAAA,QAAA,eAAA;AACA,SAAA,2BAAA,QAAA,gBAAA;AACA,OAAA,aAAA,MAAA,iBAAA;AACA,OAAA,SAAA,MAAA,aAAA;AACA,OAAA,aAAA;;AAIA,eAAe,SAAA,QAAA,CAAA,KAAA,EAAwC;AACrD,MAAM;AAAEA,IAAAA;AAAF,MAAN,KAAA;AAAA,MAAsBC,KAAtB,GAAA,6BAAA,CAAA,KAAA,EAAA,SAAA,CAAA;;AACA,MAAM;AAAA,IAAA,QAAA;AAAA,IAAA,QAAA;AAAA,IAAA,UAAA;AAAA,IAAA,OAAA;AAAA,IAAA,eAAA;AAAA,IAAA,aAAA;AAAA,IAAA,OAAA;AAAoFC,IAAAA,QAAQ,EAA5F,SAAA;AAA8FC,IAAAA;AAA9F,MACJC,UAAU,CADZ,aACY,CADZ;AAEA,MAAMC,OAAO,GAAGC,KAAK,CAALA,MAAAA,CAAhB,IAAgBA,CAAhB;AACA,MAAMC,UAAU,GAAGD,KAAK,CAAxB,MAAmBA,EAAnB;AACA,MAAME,SAAS,GAAG,KAAK,CAAL,MAAA,CAAkC;AAAA,IAAA,UAAA;AAAcC,IAAAA;AAAd,GAAlC,CAAlB;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdF,IAAAA,SAAS,CAATA,OAAAA,GAAoB;AAAA,MAAA,UAAA;AAAA,MAAA,OAAA;AAAuBG,MAAAA;AAAvB,KAApBH;AADO,GAAA,EAEN,CAAA,UAAA,EAAA,OAAA,EAFHE,eAEG,CAFM,CAATA;AAIAA,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIL,OAAO,CAAPA,OAAAA,IAAJ,QAAA,EAAiC;AAC/B,UAAMO,mBAAmB,GAAG,IAAA,2BAAA,CAAgCP,OAAO,CAAnE,OAA4B,CAA5B;AACAE,MAAAA,UAAU,CAAVA,OAAAA,GAAAA,mBAAAA;AACAJ,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,QAAQ,EAAER,OAAO,CAAnB,OAAA;AAA6BO,QAAAA;AAA7B,OAAD,CAART;AAJY,KAAA,CAMd;;AANO,GAAA,EAATO,EAAS,CAATA;;AASA,MAAMI,SAAS,GAAIC,CAAD,IAAiE;AACjFC,IAAAA,aAAa,CAAA,CAAA,EAAbA,OAAa,CAAbA;AACAC,IAAAA,SAAS,CAAA,CAAA,EAAI,CAAC,IAAIC,QAAQ,IAAb,EAAC,CAAD,EAAsB,IAAIC,aAAa,IAA3C,EAA0B,CAAtB,CAAJ,EAAqDZ,UAAU,CAA/D,OAAA,EAAA,QAAA,EAAmFC,SAAS,CAArGS,OAAS,CAATA;AAFF,GAAA;;AAIAP,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIL,OAAO,CAAX,OAAA,EAAqB;AACnBA,MAAAA,OAAO,CAAPA,OAAAA,CAAAA,gBAAAA,CAAAA,SAAAA,EAAAA,SAAAA;AACD;;AACD,WAAO,MAAM;AACX,UAAIA,OAAO,CAAX,OAAA,EAAqB;AACnB;AACAA,QAAAA,OAAO,CAAPA,OAAAA,CAAAA,mBAAAA,CAAAA,SAAAA,EAAAA,SAAAA;AACD;AARW,KAId,CAJc,CAUd;AAVO,GAAA,EAATK,EAAS,CAATA;AAaA,SAAA,aACE,IAAA,CAAA,UAAA,EAAA,QAAA,CAAA;AACE,IAAA,YAAY,EADd,KAAA;AAEE,IAAA,WAAW,EAFb,KAAA;AAGE,IAAA,cAAc,EAHhB,KAAA;AAIE,IAAA,UAAU,EAAE;AAJd,GAAA,EAAA,KAAA,EAAA;AAME,IAAA,GAAG,EANL,OAAA;AAOE,IAAA,SAAS,EAAKV,SAAL,GAAA,cAAKA,IAAwBC,KAAK,CAALA,SAAAA,GAAkBA,KAAK,CAAvBA,SAAAA,GAPxC,EAOgBD,CAPhB;AAQE,IAAA,KAAK,EARP,QAAA;AASE,IAAA,QAAQ,EAAGe,CAAD,IAAO;AACfZ,MAAAA,QAAQ,IAAIA,QAAQ,CAAC;AAAEiB,QAAAA,QAAQ,EAAEL,CAAC,CAADA,MAAAA,CAASM;AAArB,OAAD,CAApBlB;AACAD,MAAAA,SAAQ,IAAIA,SAAQ,CAACa,CAAC,CAADA,MAAAA,CAArBb,KAAoB,CAApBA;AACD;AAZH,GAAA,CAAA,CADF;AAgBD","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { IProps } from '../../Editor';\nimport { EditorContext, ExecuteCommandState } from '../../Context';\nimport { TextAreaCommandOrchestrator } from '../../commands';\nimport handleKeyDown from './handleKeyDown';\nimport shortcuts from './shortcuts';\nimport './index.less';\n\nexport interface TextAreaProps extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'value'>, IProps {}\n\nexport default function Textarea(props: TextAreaProps) {\n  const { prefixCls, ...other } = props;\n  const { markdown, commands, fullscreen, preview, highlightEnable, extraCommands, tabSize, onChange, dispatch } =\n    useContext(EditorContext);\n  const textRef = React.useRef<HTMLTextAreaElement>(null);\n  const executeRef = React.useRef<TextAreaCommandOrchestrator>();\n  const statesRef = React.useRef<ExecuteCommandState>({ fullscreen, preview });\n\n  useEffect(() => {\n    statesRef.current = { fullscreen, preview, highlightEnable };\n  }, [fullscreen, preview, highlightEnable]);\n\n  useEffect(() => {\n    if (textRef.current && dispatch) {\n      const commandOrchestrator = new TextAreaCommandOrchestrator(textRef.current);\n      executeRef.current = commandOrchestrator;\n      dispatch({ textarea: textRef.current, commandOrchestrator });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onKeyDown = (e: KeyboardEvent | React.KeyboardEvent<HTMLTextAreaElement>) => {\n    handleKeyDown(e, tabSize);\n    shortcuts(e, [...(commands || []), ...(extraCommands || [])], executeRef.current, dispatch, statesRef.current);\n  };\n  useEffect(() => {\n    if (textRef.current) {\n      textRef.current.addEventListener('keydown', onKeyDown);\n    }\n    return () => {\n      if (textRef.current) {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        textRef.current.removeEventListener('keydown', onKeyDown);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <textarea\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      autoCapitalize=\"off\"\n      spellCheck={false}\n      {...other}\n      ref={textRef}\n      className={`${prefixCls}-text-input ${other.className ? other.className : ''}`}\n      value={markdown}\n      onChange={(e) => {\n        dispatch && dispatch({ markdown: e.target.value });\n        onChange && onChange(e.target.value);\n      }}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}