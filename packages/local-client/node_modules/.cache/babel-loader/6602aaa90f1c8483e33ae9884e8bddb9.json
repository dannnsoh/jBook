{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ryzen\\\\Desktop\\\\jbook\\\\src\\\\components\\\\preview.tsx\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// setup event listener for message and eval the message (bundled code)\n// embed this as inner html in iframe using srcdoc attribute\nconst html = `\n    <html>\n        <head></head>\n        <body>\n            <div id=\"root\"></div>\n            <script>\n                window.addEventListener(\"message\", (event) => {\n                    try {\n                        eval(event.data);\n                    } catch (err) {\n                        const root = document.getElementById(\"root\");\n                        root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\n                        console.error(err);\n                    }\n                }, false)\n            </script>\n        </body>\n    </html>\n`;\n\nconst Preview = _ref => {\n  _s();\n\n  let {\n    code\n  } = _ref;\n  const iframe = useRef();\n  useEffect(() => {\n    // reload iframe to prevent user from deleting html structure\n    iframe.current.srcdoc = html; // pass bundled code into iframe element via a ref\n\n    iframe.current.contentWindow.postMessage(code, \"*\");\n  }, [code]);\n  return /*#__PURE__*/_jsxDEV(\"iframe\", {\n    title: \"code preview\",\n    ref: iframe,\n    sandbox: \"allow-scripts\",\n    srcDoc: html\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Preview, \"GAFleWBZ6O+8Op7dBuDH6PzOglQ=\");\n\n_c = Preview;\nexport default Preview;\n\nvar _c;\n\n$RefreshReg$(_c, \"Preview\");","map":{"version":3,"sources":["C:/Users/Ryzen/Desktop/jbook/src/components/preview.tsx"],"names":["useRef","useEffect","html","Preview","code","iframe","current","srcdoc","contentWindow","postMessage"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,OAAlC;;AAMA;AACA;AACA,MAAMC,IAAI,GAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAlBA;;AAoBA,MAAMC,OAAO,GAAG,QAA4B;AAAA;;AAAA,MAA3B;AAAEC,IAAAA;AAAF,GAA2B;AAC3C,QAAMC,MAAM,GAAGL,MAAM,EAArB;AAEAC,EAAAA,SAAS,CACR,MAAM;AACL;AACAI,IAAAA,MAAM,CAACC,OAAP,CAAeC,MAAf,GAAwBL,IAAxB,CAFK,CAGL;;AACAG,IAAAA,MAAM,CAACC,OAAP,CAAeE,aAAf,CAA6BC,WAA7B,CAAyCL,IAAzC,EAA+C,GAA/C;AACA,GANO,EAOR,CAAEA,IAAF,CAPQ,CAAT;AAUA,sBAAO;AAAQ,IAAA,KAAK,EAAC,cAAd;AAA6B,IAAA,GAAG,EAAEC,MAAlC;AAA0C,IAAA,OAAO,EAAC,eAAlD;AAAkE,IAAA,MAAM,EAAEH;AAA1E;AAAA;AAAA;AAAA;AAAA,UAAP;AACA,CAdD;;GAAMC,O;;KAAAA,O;AAgBN,eAAeA,OAAf","sourcesContent":["import { useRef, useEffect } from \"react\";\r\n\r\ninterface PreviewProps {\r\n\tcode: string;\r\n}\r\n\r\n// setup event listener for message and eval the message (bundled code)\r\n// embed this as inner html in iframe using srcdoc attribute\r\nconst html = `\r\n    <html>\r\n        <head></head>\r\n        <body>\r\n            <div id=\"root\"></div>\r\n            <script>\r\n                window.addEventListener(\"message\", (event) => {\r\n                    try {\r\n                        eval(event.data);\r\n                    } catch (err) {\r\n                        const root = document.getElementById(\"root\");\r\n                        root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\r\n                        console.error(err);\r\n                    }\r\n                }, false)\r\n            </script>\r\n        </body>\r\n    </html>\r\n`;\r\n\r\nconst Preview = ({ code }: PreviewProps) => {\r\n\tconst iframe = useRef<any>();\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// reload iframe to prevent user from deleting html structure\r\n\t\t\tiframe.current.srcdoc = html;\r\n\t\t\t// pass bundled code into iframe element via a ref\r\n\t\t\tiframe.current.contentWindow.postMessage(code, \"*\");\r\n\t\t},\r\n\t\t[ code ]\r\n\t);\r\n\r\n\treturn <iframe title=\"code preview\" ref={iframe} sandbox=\"allow-scripts\" srcDoc={html} />;\r\n};\r\n\r\nexport default Preview;\r\n"]},"metadata":{},"sourceType":"module"}