{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ryzen/Desktop/jbook/packages/local-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Ryzen/Desktop/jbook/packages/local-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import\"./code-cell.css\";import{useEffect}from\"react\";import CodeEditor from\"./code-editor\";import Preview from\"./preview\";import Resizable from\"./resizable\";import{useActions}from\"../hooks/use-actions\";import{useTypedSelector}from\"../hooks/use-typed-selector\";import{Loader,Segment}from\"semantic-ui-react\";import{useCumulativeCode}from\"../hooks/use-cumulative-code\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CodeCell=function CodeCell(_ref){var cell=_ref.cell;var _useActions=useActions(),updateCell=_useActions.updateCell,createBundle=_useActions.createBundle;var bundle=useTypedSelector(function(state){return state.bundles[cell.id];});var cumulativeCode=useCumulativeCode(cell.id);useEffect(function(){var timer=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:createBundle(cell.id,cumulativeCode);case 1:case\"end\":return _context.stop();}}},_callee);})),750);return function(){clearTimeout(timer);};},// eslint-disable-next-line react-hooks/exhaustive-deps\n[cell.id,cumulativeCode,createBundle]);return/*#__PURE__*/_jsx(Resizable,{direction:\"vertical\",children:/*#__PURE__*/_jsxs(\"div\",{style:{height:\"calc(100% - 10px)\",display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(Resizable,{direction:\"horizontal\",children:/*#__PURE__*/_jsx(CodeEditor,{initialValue:cell.content,onChange:function onChange(value){return updateCell(cell.id,value);}})}),!bundle||bundle.loading?/*#__PURE__*/_jsx(Segment,{children:/*#__PURE__*/_jsx(Loader,{active:true,indeterminate:true,children:\"Loading...\"})}):/*#__PURE__*/_jsx(Preview,{code:bundle.code,bundleError:bundle.err})]})});};export default CodeCell;","map":{"version":3,"sources":["C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/code-cell.tsx"],"names":["useEffect","CodeEditor","Preview","Resizable","useActions","useTypedSelector","Loader","Segment","useCumulativeCode","CodeCell","cell","updateCell","createBundle","bundle","state","bundles","id","cumulativeCode","timer","setTimeout","clearTimeout","height","display","flexDirection","content","value","loading","code","err"],"mappings":"+UAAA,MAAO,iBAAP,CACA,OAASA,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,OAASC,UAAT,KAA2B,sBAA3B,CACA,OAASC,gBAAT,KAAiC,6BAAjC,CACA,OAASC,MAAT,CAAiBC,OAAjB,KAAgC,mBAAhC,CACA,OAASC,iBAAT,KAAkC,8BAAlC,C,wFAMA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA6B,IAA1BC,CAAAA,IAA0B,MAA1BA,IAA0B,CAC7C,gBAAqCN,UAAU,EAA/C,CAAQO,UAAR,aAAQA,UAAR,CAAoBC,YAApB,aAAoBA,YAApB,CACA,GAAMC,CAAAA,MAAM,CAAGR,gBAAgB,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACC,OAAN,CAAcL,IAAI,CAACM,EAAnB,CAAJ,EAAN,CAA/B,CACA,GAAMC,CAAAA,cAAc,CAAGT,iBAAiB,CAACE,IAAI,CAACM,EAAN,CAAxC,CAEAhB,SAAS,CACR,UAAM,CACL,GAAMkB,CAAAA,KAAK,CAAGC,UAAU,sEAAC,mIACxBP,YAAY,CAACF,IAAI,CAACM,EAAN,CAAUC,cAAV,CAAZ,CADwB,sDAAD,GAErB,GAFqB,CAAxB,CAIA,MAAO,WAAM,CACZG,YAAY,CAACF,KAAD,CAAZ,CACA,CAFD,CAGA,CATO,CAUR;AACA,CAAER,IAAI,CAACM,EAAP,CAAWC,cAAX,CAA2BL,YAA3B,CAXQ,CAAT,CAcA,mBACC,KAAC,SAAD,EAAW,SAAS,CAAC,UAArB,uBACC,aACC,KAAK,CAAE,CACNS,MAAM,CAAE,mBADF,CAENC,OAAO,CAAE,MAFH,CAGNC,aAAa,CAAE,KAHT,CADR,wBAOC,KAAC,SAAD,EAAW,SAAS,CAAC,YAArB,uBACC,KAAC,UAAD,EACC,YAAY,CAAEb,IAAI,CAACc,OADpB,CAEC,QAAQ,CAAE,kBAAAC,KAAK,QAAId,CAAAA,UAAU,CAACD,IAAI,CAACM,EAAN,CAAUS,KAAV,CAAd,EAFhB,EADD,EAPD,CAaE,CAACZ,MAAD,EAAWA,MAAM,CAACa,OAAlB,cACA,KAAC,OAAD,wBACC,KAAC,MAAD,EAAQ,MAAM,KAAd,CAAe,aAAa,KAA5B,wBADD,EADA,cAOA,KAAC,OAAD,EAAS,IAAI,CAAEb,MAAM,CAACc,IAAtB,CAA4B,WAAW,CAAEd,MAAM,CAACe,GAAhD,EApBF,GADD,EADD,CAgCA,CAnDD,CAqDA,cAAenB,CAAAA,QAAf","sourcesContent":["import \"./code-cell.css\";\r\nimport { useEffect } from \"react\";\r\nimport CodeEditor from \"./code-editor\";\r\nimport Preview from \"./preview\";\r\nimport Resizable from \"./resizable\";\r\nimport { Cell } from \"../state\";\r\nimport { useActions } from \"../hooks/use-actions\";\r\nimport { useTypedSelector } from \"../hooks/use-typed-selector\";\r\nimport { Loader, Segment } from \"semantic-ui-react\";\r\nimport { useCumulativeCode } from \"../hooks/use-cumulative-code\";\r\n\r\ninterface CodeCellProps {\r\n\tcell: Cell;\r\n}\r\n\r\nconst CodeCell = ({ cell }: CodeCellProps) => {\r\n\tconst { updateCell, createBundle } = useActions();\r\n\tconst bundle = useTypedSelector(state => state.bundles[cell.id]);\r\n\tconst cumulativeCode = useCumulativeCode(cell.id);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconst timer = setTimeout(async () => {\r\n\t\t\t\tcreateBundle(cell.id, cumulativeCode);\r\n\t\t\t}, 750);\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t};\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[ cell.id, cumulativeCode, createBundle ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Resizable direction=\"vertical\">\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: \"calc(100% - 10px)\",\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tflexDirection: \"row\"\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Resizable direction=\"horizontal\">\r\n\t\t\t\t\t<CodeEditor\r\n\t\t\t\t\t\tinitialValue={cell.content}\r\n\t\t\t\t\t\tonChange={value => updateCell(cell.id, value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Resizable>\r\n\t\t\t\t{!bundle || bundle.loading ? (\r\n\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t<Loader active indeterminate>\r\n\t\t\t\t\t\t\tLoading...\r\n\t\t\t\t\t\t</Loader>\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Preview code={bundle.code} bundleError={bundle.err} />\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{/* <Segment>\r\n\t\t\t\t<Loader active indeterminate>\r\n\t\t\t\t\tLoading...\r\n\t\t\t\t</Loader>\r\n\t\t\t</Segment> */}\r\n\t\t</Resizable>\r\n\t);\r\n};\r\n\r\nexport default CodeCell;\r\n"]},"metadata":{},"sourceType":"module"}