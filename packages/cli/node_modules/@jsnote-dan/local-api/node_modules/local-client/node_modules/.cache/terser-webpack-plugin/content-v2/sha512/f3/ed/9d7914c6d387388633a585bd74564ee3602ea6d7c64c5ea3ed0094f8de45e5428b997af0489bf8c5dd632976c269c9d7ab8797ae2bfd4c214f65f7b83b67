{"code":"(this.webpackJsonpjbook=this.webpackJsonpjbook||[]).push([[0],{202:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},263:function(e,t,n){},571:function(e,t,n){\"use strict\";n.r(t);var r={};n.r(r),n.d(r,\"updateCell\",(function(){return N})),n.d(r,\"deleteCell\",(function(){return R})),n.d(r,\"moveCell\",(function(){return D})),n.d(r,\"insertCellAfter\",(function(){return M})),n.d(r,\"createBundle\",(function(){return I}));n(201),n(202);var a,c=n(27),i=n.n(c),o=n(62),s=n(49),u=n(176);!function(e){e.MOVE_CELL=\"move_cell\",e.DELETE_CELL=\"delete_cell\",e.INSERT_CELL_AFTER=\"insert_cell_after\",e.UPDATE_CELL=\"update_cell\",e.BUNDLE_START=\"bundle_start\",e.BUNDLE_COMPLETE=\"bundle_complete\"}(a||(a={}));var d=n(86),l={loading:!1,error:null,order:[],data:{}},p=function(){return Math.random().toString(36).substr(2,5)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(t.type){case a.UPDATE_CELL:var n=t.payload,r=n.id,c=n.content;return e.data[r].content=c,e;case a.DELETE_CELL:return delete e.data[t.payload],e.order=e.order.filter((function(e){return e!==t.payload})),e;case a.MOVE_CELL:var i=t.payload.direction,o=e.order.findIndex((function(e){return e===t.payload.id})),s=\"up\"===i?o-1:o+1;return s<0||s>e.order.length-1||(e.order[o]=e.order[s],e.order[s]=t.payload.id),e;case a.INSERT_CELL_AFTER:var u={id:p(),type:t.payload.type,content:\"\"};e.data[u.id]=u;var d=e.order.findIndex((function(e){return e===t.payload.id}));return-1===d?e.order.unshift(u.id):e.order.splice(d+1,0,u.id),e;default:return e}}))},j={},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(t.type){case a.BUNDLE_START:return e[t.payload.id]={loading:!0,code:\"\",err:\"\"},e;case a.BUNDLE_COMPLETE:return e[t.payload.id]={loading:!1,code:t.payload.bundle.code,err:t.payload.bundle.err},e;default:return e}}))},h=Object(s.c)({cells:f,bundles:b}),v=Object(s.d)(h,{},Object(s.a)(u.a));v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:\"text\"}}),v.dispatch({type:a.INSERT_CELL_AFTER,payload:{id:null,type:\"code\"}});var m,x=n(12),O=n.n(x),E=n(24),w=n(130),y=n(131),L=n.n(y),C=n(177),g=n.n(C).a.createInstance({name:\"filecache\"}),_=function(e){return{name:\"fetch-plugin\",setup:function(t){t.onLoad({filter:/(^index\\.js$)/},(function(){return{loader:\"jsx\",contents:e}})),t.onLoad({filter:/.*/},function(){var e=Object(E.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getItem(t.path);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt(\"return\",n);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.onLoad({filter:/(.css$)/},function(){var e=Object(E.a)(O.a.mark((function e(t){var n,r,a,c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get(t.path);case 2:return n=e.sent,r=n.data,a=n.request,c=r.replace(/\\n/g,\"\").replace(/\"/g,'\\\\\"').replace(/'/g,\"\\\\'\"),i='\\n\\t\\t\\t\\t\\tconst style = document.createElement(\"style\");\\n\\t\\t\\t\\t\\tstyle.innerText = \"'.concat(c,'\";\\n\\t\\t\\t\\t\\tdocument.head.appendChild(style);\\n\\t\\t\\t\\t\\t'),o={loader:\"jsx\",contents:i,resolveDir:new URL(\"./\",a.responseURL).pathname},e.next=10,g.setItem(t.path,o);case 10:return e.abrupt(\"return\",o);case 11:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.onLoad({filter:/.*/},function(){var e=Object(E.a)(O.a.mark((function e(t){var n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get(t.path);case 2:return n=e.sent,r=n.data,a=n.request,c={loader:\"jsx\",contents:r,resolveDir:new URL(\"./\",a.responseURL).pathname},e.next=8,g.setItem(t.path,c);case 8:return e.abrupt(\"return\",c);case 9:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},T=function(){var e=Object(E.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=6;break}return e.next=3,w.initialize({worker:!0,wasmURL:\"https://unpkg.com/esbuild-wasm/esbuild.wasm\"});case 3:m=!0,e.next=0;break;case 6:return e.prev=6,e.next=9,w.build({entryPoints:[\"index.js\"],bundle:!0,write:!1,plugins:[{name:\"unpkg-path-plugin\",setup:function(e){e.onResolve({filter:/(^index\\.js$)/},(function(){return{path:\"index.js\",namespace:\"a\"}})),e.onResolve({filter:/^\\.+\\//},function(){var e=Object(E.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{namespace:\"a\",path:new URL(t.path,\"https://unpkg.com\".concat(t.resolveDir,\"/\")).href});case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.onResolve({filter:/.*/},function(){var e=Object(E.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{namespace:\"a\",path:\"https://unpkg.com/\".concat(t.path)});case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},_(t)],define:{\"process.env.NODE_ENV\":'\"production\"',global:\"window\"},jsxFactory:\"_React.createElement\",jsxFragment:\"_React.Fragment\"});case 9:return n=e.sent,e.abrupt(\"return\",{code:n.outputFiles[0].text,err:\"\"});case 13:if(e.prev=13,e.t0=e.catch(6),!(e.t0 instanceof Error)){e.next=19;break}return e.abrupt(\"return\",{code:\"\",err:e.t0.message});case 19:return e.abrupt(\"return\",{code:\"\",err:\"An error has occurred!\"});case 20:case\"end\":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),k=T,N=function(e,t){return{type:a.UPDATE_CELL,payload:{id:e,content:t}}},R=function(e){return{type:a.DELETE_CELL,payload:e}},D=function(e,t){return{type:a.MOVE_CELL,payload:{id:e,direction:t}}},M=function(e,t){return{type:a.INSERT_CELL_AFTER,payload:{id:e,type:t}}},I=function(e,t){return function(){var n=Object(E.a)(O.a.mark((function n(r){var c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:a.BUNDLE_START,payload:{id:e}}),n.next=3,k(t);case 3:c=n.sent,r({type:a.BUNDLE_COMPLETE,payload:{id:e,bundle:c}});case 5:case\"end\":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=(n(238),o.c),U=(n(239),n(0)),z=function(){var e=Object(o.b)();return Object(U.useMemo)((function(){return Object(s.b)(r,e)}),[e])},A=n(596),B=n(598),F=n(66),V=n(1),P=function(e){var t=e.previousCellId,n=e.forceVisible,r=z().insertCellAfter;return Object(V.jsx)(A.a,{horizontal:!0,section:!0,children:Object(V.jsxs)(B.a.Group,{className:\"add-cell \".concat(n?\"force-visible\":\"\"),compact:!0,children:[Object(V.jsxs)(B.a,{animated:\"fade\",className:\"add-cell-button\",onClick:function(){return r(t,\"code\")},children:[Object(V.jsx)(B.a.Content,{visible:!0,children:\"Code\"}),Object(V.jsx)(B.a.Content,{hidden:!0,children:Object(V.jsx)(F.a,{name:\"add\"})})]}),Object(V.jsxs)(B.a,{animated:\"fade\",className:\"add-cell-button\",onClick:function(){return r(t,\"text\")},children:[Object(V.jsx)(B.a.Content,{visible:!0,children:\"Text\"}),Object(V.jsx)(B.a.Content,{hidden:!0,children:Object(V.jsx)(F.a,{name:\"add\"})})]})]})})},H=(n(244),n(245),function(e){var t=e.id,n=z(),r=n.moveCell,a=n.deleteCell;return Object(V.jsxs)(B.a.Group,{className:\"action-bar\",children:[Object(V.jsx)(B.a,{className:\"action-bar-button\",icon:\"arrow up\",onClick:function(){return r(t,\"up\")}}),Object(V.jsx)(B.a,{className:\"action-bar-button\",icon:\"arrow down\",onClick:function(){return r(t,\"down\")}}),Object(V.jsx)(B.a,{className:\"action-bar-button\",icon:\"trash alternate\",onClick:function(){return a(t)}})]})}),W=(n(246),n(247),n(188)),$=n(180),J=n.n($),q=n(181),G=n.n(q),K=function(e){var t=e.initialValue,n=e.onChange,r=Object(U.useRef)(null);return Object(V.jsxs)(\"div\",{className:\"editor-wrapper\",children:[Object(V.jsxs)(B.a,{icon:!0,animated:\"fade\",labelPosition:\"right\",className:\"button-format\",onClick:function(){var e=r.current.getValue(),t=J.a.format(e,{parser:\"babel\",plugins:[G.a],useTabs:!0,semi:!0}).replace(/\\n$/,\"\");r.current.setValue(t)},children:[Object(V.jsx)(B.a.Content,{visible:!0,className:\"text-center\",children:Object(V.jsx)(F.a,{name:\"paint brush\"})}),Object(V.jsx)(B.a.Content,{hidden:!0,children:\"Format\"})]}),Object(V.jsx)(W.a,{onMount:function(e,t){r.current=e,e.onDidChangeModelContent((function(){n(e.getValue())}))},value:t,theme:\"vs-dark\",language:\"javascript\",height:\"100%\",options:{wordWrap:\"on\",minimap:{enabled:!1},showUnused:!1,folding:!1,lineNumbersMinChars:3,fontSize:16,scrollBeyondLastLine:!1,automaticLayout:!0}})]})},Q=(n(256),'\\n    <html>\\n        <head></head>\\n        <body>\\n            <div id=\"root\"></div>\\n            <script>\\n\\t\\t\\t\\tconst handleError = (err) => {\\n\\t\\t\\t\\t\\tconst root = document.getElementById(\"root\");\\n\\t\\t\\t\\t\\troot.innerHTML = \\'<div style=\"color: red;\"><h4>Runtime Error</h4>\\' + err + \\'</div>\\';\\n\\t\\t\\t\\t\\tconsole.error(err);\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\twindow.addEventListener(\"error\", (event) => {\\n\\t\\t\\t\\t\\tevent.preventDefault();\\n\\t\\t\\t\\t\\thandleError(event.error);\\n\\t\\t\\t\\t});\\n                window.addEventListener(\"message\", (event) => {\\n                    try {\\n                        eval(event.data);\\n                    } catch (err) {\\n                        handleError(err);\\n                    }\\n                }, false)\\n            <\\/script>\\n        </body>\\n    </html>\\n'),X=function(e){var t=e.code,n=e.bundleError,r=Object(U.useRef)();return Object(U.useEffect)((function(){r.current.srcdoc=Q,setTimeout((function(){r.current.contentWindow.postMessage(t,\"*\")}),50)}),[t]),Object(V.jsxs)(\"div\",{className:\"preview-wrapper\",children:[Object(V.jsx)(\"iframe\",{title:\"code preview\",ref:r,sandbox:\"allow-scripts\",srcDoc:Q}),n&&Object(V.jsxs)(\"div\",{className:\"preview-error\",children:[Object(V.jsx)(\"h3\",{children:\"Compilation Error\"}),n]})]})},Y=n(11),Z=n(20),ee=(n(257),n(182)),te=function(e){var t,n=e.direction,r=e.children,a=Object(U.useState)(window.innerWidth),c=Object(Z.a)(a,2),i=c[0],o=c[1],s=Object(U.useState)(window.innerHeight),u=Object(Z.a)(s,2),d=u[0],l=u[1],p=Object(U.useState)(.75*window.innerWidth),f=Object(Z.a)(p,2),j=f[0],b=f[1];return Object(U.useEffect)((function(){var e,t=function(){e&&clearTimeout(e),e=setTimeout((function(){o(window.innerWidth),l(window.innerHeight),.75*window.innerWidth<j&&b(.75*window.innerWidth)}),100)};return window.addEventListener(\"resize\",t),function(){window.removeEventListener(\"resize\",t)}}),[j]),t=\"horizontal\"===n?{className:\"resize-horizontal\",width:j,height:1/0,resizeHandles:[\"e\"],maxConstraints:[.75*i,1/0],minConstraints:[.2*i,1/0],onResizeStop:function(e,t){b(t.size.width)}}:{width:1/0,height:400,resizeHandles:[\"s\"],maxConstraints:[1/0,.9*d],minConstraints:[1/0,100]},Object(V.jsx)(ee.ResizableBox,Object(Y.a)(Object(Y.a)({},t),{},{children:r}))},ne=n(599),re=n(597),ae=n(183),ce=function(e){var t,n=e.cell,r=z(),a=r.updateCell,c=r.createBundle,i=S((function(e){return e.bundles[n.id]})),o=(t=n.id,S((function(e){var n,r=e.cells,a=r.data,c=r.order.map((function(e){return a[e]})),i=[],o=Object(ae.a)(c);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(\"code\"===s.type&&(s.id===t?i.push('\\n        import _React from \"react\";\\n        import _ReactDOM from \"react-dom\";\\n        var show = (value) => {\\n            const root = document.getElementById(\"root\");\\n            if (typeof value === \"object\") {\\n                if (value.$$typeof && value.props) {\\n                    _ReactDOM.render(value, root)\\n                } else {\\n                    root.innerHTML = JSON.stringify(value)\\n                }\\n            } else {\\n                root.innerHTML = value;\\n            }\\n        };\\n        '):i.push(\"var show = () => {}\"),i.push(s.content)),s.id===t)break}}catch(u){o.e(u)}finally{o.f()}return i})).join(\"\\n\"));return Object(U.useEffect)((function(){var e=setTimeout(Object(E.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(n.id,o);case 1:case\"end\":return e.stop()}}),e)}))),750);return function(){clearTimeout(e)}}),[n.id,o,c]),Object(V.jsx)(te,{direction:\"vertical\",children:Object(V.jsxs)(\"div\",{style:{height:\"calc(100% - 10px)\",display:\"flex\",flexDirection:\"row\"},children:[Object(V.jsx)(te,{direction:\"horizontal\",children:Object(V.jsx)(K,{initialValue:n.content,onChange:function(e){return a(n.id,e)}})}),!i||i.loading?Object(V.jsx)(ne.a,{children:Object(V.jsx)(re.a,{active:!0,indeterminate:!0,children:\"Loading...\"})}):Object(V.jsx)(X,{code:i.code,bundleError:i.err})]})})},ie=(n(263),n(134)),oe=function(e){var t=e.cell,n=Object(U.useRef)(null),r=Object(U.useState)(!1),a=Object(Z.a)(r,2),c=a[0],i=a[1],o=z().updateCell;return Object(U.useEffect)((function(){var e=function(e){n.current&&e.target&&n.current.contains(e.target)||i(!1)};return document.addEventListener(\"click\",e,{capture:!0}),function(){document.removeEventListener(\"click\",e,{capture:!0})}}),[]),c?Object(V.jsx)(\"div\",{className:\"text-editor\",ref:n,children:Object(V.jsx)(ie.a,{value:t.content,onChange:function(e){return o(t.id,e||\"\")},autoFocus:!0})}):Object(V.jsx)(ne.a,{className:\"text-editor\",onClick:function(){return i(!0)},children:Object(V.jsx)(\"div\",{className:\"card-content\",children:Object(V.jsx)(ie.a.Markdown,{source:t.content||\"*Click to edit*\"})})})},se=function(e){var t=e.cell;return Object(V.jsxs)(\"div\",{className:\"cell-list-item\",children:[Object(V.jsx)(\"div\",{className:\"action-bar-wrapper\",children:Object(V.jsx)(H,{id:t.id})}),\"code\"===t.type?Object(V.jsx)(ce,{cell:t}):Object(V.jsx)(oe,{cell:t})]})},ue=function(){var e=S((function(e){var t=e.cells,n=t.order,r=t.data;return n.map((function(e){return r[e]}))})),t=e.map((function(e){return Object(V.jsxs)(\"div\",{children:[Object(V.jsx)(se,{cell:e}),Object(V.jsx)(P,{previousCellId:e.id})]},e.id)}));return Object(V.jsxs)(\"div\",{className:\"cell-list\",children:[Object(V.jsx)(P,{forceVisible:0===e.length,previousCellId:null}),t]})},de=function(){return Object(V.jsx)(o.a,{store:v,children:Object(V.jsx)(\"div\",{children:Object(V.jsx)(ue,{})})})};i.a.render(Object(V.jsx)(de,{}),document.getElementById(\"root\"))}},[[571,1,2]]]);","name":"static/js/main.d38c68e3.chunk.js","map":{"version":3,"sources":["static/js/main.d38c68e3.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","action_creators_namespaceObject","d","action_creators_updateCell","action_creators_deleteCell","action_creators_moveCell","action_creators_insertCellAfter","action_creators_createBundle","ActionType","react_dom","react_dom_default","n","es","redux","redux_thunk_es","immer_esm","initialState","loading","error","order","data","randomId","Math","random","toString","substr","cellsReducer","state","arguments","length","undefined","action","Object","draft","type","UPDATE_CELL","_action$payload","payload","id","content","DELETE_CELL","filter","MOVE_CELL","direction","index","findIndex","targetId","INSERT_CELL_AFTER","cell","foundIndex","unshift","splice","bundlesReducer_initialState","bundlesReducer","BUNDLE_START","code","err","BUNDLE_COMPLETE","bundle","state_reducers","cells","bundles","store","dispatch","service","regenerator","regenerator_default","asyncToGenerator","browser","axios","axios_default","localforage","fileCache","a","createInstance","name","fetch_plugin_fetchPlugin","inputCode","setup","build","onLoad","loader","contents","_ref","mark","_callee","args","cachedResult","wrap","_context","prev","next","getItem","path","sent","abrupt","stop","_x","apply","_ref2","_callee2","_yield$axios$get","request","escaped","result","_context2","get","replace","concat","resolveDir","URL","responseURL","pathname","setItem","_x2","_ref3","_callee3","_yield$axios$get2","_context3","_x3","bundler_bundle","rawCode","worker","wasmURL","entryPoints","write","plugins","onResolve","namespace","href","define","global","jsxFactory","jsxFragment","outputFiles","text","t0","Error","message","bundler","cellType","input","useTypedSelector","react","use_actions_useActions","Divider","Button","Icon","jsx_runtime","components_add_cell","previousCellId","forceVisible","insertCellAfter","horizontal","section","children","Group","className","compact","animated","onClick","Content","visible","hidden","components_action_bar","_useActions","moveCell","deleteCell","icon","lib_es","standalone","standalone_default","parser_babel","parser_babel_default","components_code_editor","initialValue","onChange","editorRef","labelPosition","unformatted","current","getValue","formatted","format","parser","useTabs","semi","setValue","onMount","editor","monaco","onDidChangeModelContent","value","theme","language","height","options","wordWrap","minimap","enabled","showUnused","folding","lineNumbersMinChars","fontSize","scrollBeyondLastLine","automaticLayout","html","components_preview","bundleError","iframe","srcdoc","setTimeout","contentWindow","postMessage","title","ref","sandbox","srcDoc","objectSpread2","slicedToArray","react_resizable","components_resizable","resizableAttr","_useState","window","innerWidth","_useState2","setInnerWidth","_useState3","innerHeight","_useState4","setInnerHeight","_useState5","_useState6","width","setWidth","timer","listener","clearTimeout","addEventListener","removeEventListener","Infinity","resizeHandles","maxConstraints","minConstraints","onResizeStop","event","size","Segment","Loader","createForOfIteratorHelper","components_code_cell","cellId","updateCell","createBundle","cumulativeCode","_step","_state$cells","orderedCells","map","_iterator","s","done","c","e","f","join","style","display","flexDirection","active","indeterminate","esm","components_text_editor","editing","setEditing","target","contains","document","capture","autoFocus","Markdown","source","components_cell_list_item","components_cell_list","_ref$cells","renderedCells","src_App","render","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpjbook\"] = this[\"webpackJsonpjbook\"] || []).push([[0],{\n\n/***/ 202:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 238:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 239:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 244:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 245:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 246:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 256:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 263:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 571:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// NAMESPACE OBJECT: ./src/state/action-creators/index.ts\nvar action_creators_namespaceObject = {};\n__webpack_require__.r(action_creators_namespaceObject);\n__webpack_require__.d(action_creators_namespaceObject, \"updateCell\", function() { return action_creators_updateCell; });\n__webpack_require__.d(action_creators_namespaceObject, \"deleteCell\", function() { return action_creators_deleteCell; });\n__webpack_require__.d(action_creators_namespaceObject, \"moveCell\", function() { return action_creators_moveCell; });\n__webpack_require__.d(action_creators_namespaceObject, \"insertCellAfter\", function() { return action_creators_insertCellAfter; });\n__webpack_require__.d(action_creators_namespaceObject, \"createBundle\", function() { return action_creators_createBundle; });\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-css/semantic.min.css\nvar semantic_min = __webpack_require__(201);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(202);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(27);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 24 modules\nvar es = __webpack_require__(62);\n\n// EXTERNAL MODULE: ./node_modules/redux/es/redux.js + 2 modules\nvar redux = __webpack_require__(49);\n\n// EXTERNAL MODULE: ./node_modules/redux-thunk/es/index.js\nvar redux_thunk_es = __webpack_require__(176);\n\n// CONCATENATED MODULE: ./src/state/action-types/index.ts\n// export file for action.type\nvar ActionType;(function(ActionType){ActionType[\"MOVE_CELL\"]=\"move_cell\";ActionType[\"DELETE_CELL\"]=\"delete_cell\";ActionType[\"INSERT_CELL_AFTER\"]=\"insert_cell_after\";ActionType[\"UPDATE_CELL\"]=\"update_cell\";ActionType[\"BUNDLE_START\"]=\"bundle_start\";ActionType[\"BUNDLE_COMPLETE\"]=\"bundle_complete\";})(ActionType||(ActionType={}));\n// EXTERNAL MODULE: ./node_modules/immer/dist/immer.esm.js\nvar immer_esm = __webpack_require__(86);\n\n// CONCATENATED MODULE: ./src/state/reducers/cellsReducer.ts\nvar initialState={loading:false,error:null,order:[],data:{}};var cellsReducer_reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;return Object(immer_esm[\"a\" /* default */])(state,function(draft){switch(action.type){case ActionType.UPDATE_CELL:var _action$payload=action.payload,id=_action$payload.id,content=_action$payload.content;draft.data[id].content=content;return draft;case ActionType.DELETE_CELL:// delete cell\ndelete draft.data[action.payload];// delete cell id from order array\ndraft.order=draft.order.filter(function(id){return id!==action.payload;});return draft;case ActionType.MOVE_CELL:var direction=action.payload.direction;// index of cell\nvar index=draft.order.findIndex(function(id){return id===action.payload.id;});// new index of cell depending on move direction\nvar targetId=direction===\"up\"?index-1:index+1;// ensure new index is within bounds of order array\nif(targetId<0||targetId>draft.order.length-1){return draft;}// swap\ndraft.order[index]=draft.order[targetId];draft.order[targetId]=action.payload.id;return draft;case ActionType.INSERT_CELL_AFTER:var cell={id:randomId(),type:action.payload.type,content:\"\"};// insert cell into data array, which contains all the cells and their ids\ndraft.data[cell.id]=cell;// find index of cell to insert after\nvar foundIndex=draft.order.findIndex(function(id){return id===action.payload.id;});// if index is -1 (means no index was found for that id), add cell to start of order array\nif(foundIndex===-1){draft.order.unshift(cell.id);}else{draft.order.splice(foundIndex+1,0,cell.id);}return draft;default:return draft;}});};var randomId=function randomId(){return Math.random().toString(36).substr(2,5);};/* harmony default export */ var cellsReducer = (cellsReducer_reducer);\n// CONCATENATED MODULE: ./src/state/reducers/bundlesReducer.ts\nvar bundlesReducer_initialState={};var bundlesReducer_reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:bundlesReducer_initialState;var action=arguments.length>1?arguments[1]:undefined;return Object(immer_esm[\"a\" /* default */])(state,function(draft){switch(action.type){case ActionType.BUNDLE_START:// id of code cell to bundle\ndraft[action.payload.id]={loading:true,code:\"\",err:\"\"};return draft;case ActionType.BUNDLE_COMPLETE:draft[action.payload.id]={loading:false,code:action.payload.bundle.code,err:action.payload.bundle.err};return draft;default:return draft;}});};/* harmony default export */ var bundlesReducer = (bundlesReducer_reducer);\n// CONCATENATED MODULE: ./src/state/reducers/index.ts\n// export file for all reducers combined\nvar reducers=Object(redux[\"c\" /* combineReducers */])({cells:cellsReducer,bundles:bundlesReducer});/* harmony default export */ var state_reducers = (reducers);\n// CONCATENATED MODULE: ./src/state/store.ts\n// export file for redux store\nvar store=Object(redux[\"d\" /* createStore */])(state_reducers,{},Object(redux[\"a\" /* applyMiddleware */])(redux_thunk_es[\"a\" /* default */]));store.dispatch({type:ActionType.INSERT_CELL_AFTER,payload:{id:null,type:\"text\"}});store.dispatch({type:ActionType.INSERT_CELL_AFTER,payload:{id:null,type:\"code\"}});\n// CONCATENATED MODULE: ./src/state/cell.ts\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(12);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/esbuild-wasm/lib/browser.js\nvar browser = __webpack_require__(130);\n\n// CONCATENATED MODULE: ./src/bundler/plugins/unpkg-path-plugin.ts\nvar unpkg_path_plugin_unpkgPathPlugin=function unpkgPathPlugin(){return{// name is mainly to identify this plugin for debugging purposes\nname:\"unpkg-path-plugin\",// setup of bundling process\nsetup:function setup(build){// onResolve event listener (override esbuild's default process of figuring out where the main file is stored)\n// can have multiple onResolve functions for different types of files, with the regex filter changing to look for the different types of files\n// return path to where the main file is stored (in this case, index.js as defined in the \"entry point\")\n// namespace is an \"identifier\" which can be used in onLoad to apply the onLoad function to only the files with the specified namespace\n// handle root entry file of index.js\nbuild.onResolve({filter:/(^index\\.js$)/},function(){return{path:\"index.js\",namespace:\"a\"};});// handle relative paths in a module\nbuild.onResolve({filter:/^\\.+\\//},/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(args){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",{namespace:\"a\",path:new URL(args.path,\"https://unpkg.com\".concat(args.resolveDir,\"/\")).href});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());// handle main file of a module\nbuild.onResolve({filter:/.*/},/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(args){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",{namespace:\"a\",path:\"https://unpkg.com/\".concat(args.path)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());}};};\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(131);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/localforage/dist/localforage.js\nvar localforage = __webpack_require__(177);\nvar localforage_default = /*#__PURE__*/__webpack_require__.n(localforage);\n\n// CONCATENATED MODULE: ./src/bundler/plugins/fetch-plugin.ts\nvar fileCache=localforage_default.a.createInstance({name:\"filecache\"});var fetch_plugin_fetchPlugin=function fetchPlugin(inputCode){return{// name is mainly to identify this plugin for debugging purposes\nname:\"fetch-plugin\",setup:function setup(build){// onLoad event listener (override esbuild's default file loading process)\n// handle root entry file of index.js\nbuild.onLoad({filter:/(^index\\.js$)/},function(){return{loader:\"jsx\",contents:inputCode};});// handle check to see if file has already been fetched and if it is in the cache\nbuild.onLoad({filter:/.*/},/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(args){var cachedResult;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fileCache.getItem(args.path);case 2:cachedResult=_context.sent;if(!cachedResult){_context.next=5;break;}return _context.abrupt(\"return\",cachedResult);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());//handle css files\nbuild.onLoad({filter:/(.css$)/},/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(args){var _yield$axios$get,data,request,escaped,contents,result;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios_default.a.get(args.path);case 2:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;request=_yield$axios$get.request;// workaround to get css files as esbuild does not support importing css files from js files as of now\n// comb through the css file to replace all new lines, single and double quotes\nescaped=data.replace(/\\n/g,\"\").replace(/\"/g,'\\\\\"').replace(/'/g,\"\\\\'\");contents=\"\\n\\t\\t\\t\\t\\tconst style = document.createElement(\\\"style\\\");\\n\\t\\t\\t\\t\\tstyle.innerText = \\\"\".concat(escaped,\"\\\";\\n\\t\\t\\t\\t\\tdocument.head.appendChild(style);\\n\\t\\t\\t\\t\\t\");result={loader:\"jsx\",contents:contents,resolveDir:new URL(\"./\",request.responseURL).pathname};_context2.next=10;return fileCache.setItem(args.path,result);case 10:return _context2.abrupt(\"return\",result);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());// handle all other files\nbuild.onLoad({filter:/.*/},/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(args){var _yield$axios$get2,data,request,result;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios_default.a.get(args.path);case 2:_yield$axios$get2=_context3.sent;data=_yield$axios$get2.data;request=_yield$axios$get2.request;result={loader:\"jsx\",contents:data,resolveDir:new URL(\"./\",request.responseURL).pathname};_context3.next=8;return fileCache.setItem(args.path,result);case 8:return _context3.abrupt(\"return\",result);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());}};};\n// CONCATENATED MODULE: ./src/bundler/index.ts\n// to check if esbuild has been initialized\nvar service;var bundler_bundle=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(rawCode){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(service){_context.next=6;break;}_context.next=3;return browser[\"initialize\"]({worker:true,wasmURL:\"https://unpkg.com/esbuild-wasm/esbuild.wasm\"});case 3:service=true;_context.next=0;break;case 6:_context.prev=6;_context.next=9;return browser[\"build\"]({entryPoints:[\"index.js\"],bundle:true,write:false,plugins:[unpkg_path_plugin_unpkgPathPlugin(),fetch_plugin_fetchPlugin(rawCode)],define:{\"process.env.NODE_ENV\":'\"production\"',global:\"window\"},// configure esbuild to use _React for the show() function to prevent naming collision with \"import React ...\"\njsxFactory:\"_React.createElement\",jsxFragment:\"_React.Fragment\"});case 9:result=_context.sent;return _context.abrupt(\"return\",{code:result.outputFiles[0].text,err:\"\"});case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);if(!(_context.t0 instanceof Error)){_context.next=19;break;}return _context.abrupt(\"return\",{code:\"\",err:_context.t0.message});case 19:return _context.abrupt(\"return\",{code:\"\",err:\"An error has occurred!\"});case 20:case\"end\":return _context.stop();}}},_callee,null,[[6,13]]);}));return function bundle(_x){return _ref.apply(this,arguments);};}();/* harmony default export */ var bundler = (bundler_bundle);\n// CONCATENATED MODULE: ./src/state/action-creators/index.ts\nvar action_creators_updateCell=function updateCell(id,content){return{type:ActionType.UPDATE_CELL,payload:{id:id,content:content}};};var action_creators_deleteCell=function deleteCell(id){return{type:ActionType.DELETE_CELL,payload:id};};var action_creators_moveCell=function moveCell(id,direction){return{type:ActionType.MOVE_CELL,payload:{id:id,direction:direction}};};var action_creators_insertCellAfter=function insertCellAfter(id,cellType){return{type:ActionType.INSERT_CELL_AFTER,payload:{id:id,type:cellType}};};var action_creators_createBundle=function createBundle(id,input){// utilising redux thunk for bundling (async)\n// type annotation for dispatch is to make sure we only call dispatch with an actual action with a payload\nreturn/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(dispatch){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:ActionType.BUNDLE_START,payload:{id:id}});_context.next=3;return bundler(input);case 3:result=_context.sent;dispatch({type:ActionType.BUNDLE_COMPLETE,payload:{id:id,bundle:result}});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};\n// CONCATENATED MODULE: ./src/state/index.ts\n// main export file for everything related to redux\n\n// EXTERNAL MODULE: ./src/components/cell-list.css\nvar cell_list = __webpack_require__(238);\n\n// CONCATENATED MODULE: ./src/hooks/use-typed-selector.ts\nvar useTypedSelector=es[\"c\" /* useSelector */];\n// EXTERNAL MODULE: ./src/components/add-cell.css\nvar add_cell = __webpack_require__(239);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/hooks/use-actions.ts\nvar use_actions_useActions=function useActions(){var dispatch=Object(es[\"b\" /* useDispatch */])();// useMemo is used here to only bind the action creators once, if not, in the code cell component, every time useActions is called, it will bind the action creators again resulting in a \"different\" createBundle which will cause the useEffect hook to run again, causing an infinite loop of the bundling process\nreturn Object(react[\"useMemo\"])(function(){return Object(redux[\"b\" /* bindActionCreators */])(action_creators_namespaceObject,dispatch);},[dispatch]);};// bindActionCreators will return a dispatch wrapped function for each action creator so we can just utilise useActions() this way:\n// const { updateCell } = useActions()\n// updateCell({\n//     type: ...,\n//     payload: ...\n// })\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Divider/Divider.js\nvar Divider = __webpack_require__(596);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Button/Button.js + 19 modules\nvar Button = __webpack_require__(598);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Icon/Icon.js + 1 modules\nvar Icon = __webpack_require__(66);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/components/add-cell.tsx\nvar add_cell_AddCell=function AddCell(_ref){var previousCellId=_ref.previousCellId,forceVisible=_ref.forceVisible;var _useActions=use_actions_useActions(),insertCellAfter=_useActions.insertCellAfter;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Divider[\"a\" /* default */],{horizontal:true,section:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */].Group,{className:\"add-cell \".concat(forceVisible?\"force-visible\":\"\"),compact:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */],{animated:\"fade\",className:\"add-cell-button\",onClick:function onClick(){return insertCellAfter(previousCellId,\"code\");},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */].Content,{visible:true,children:\"Code\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */].Content,{hidden:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */],{name:\"add\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */],{animated:\"fade\",className:\"add-cell-button\",onClick:function onClick(){return insertCellAfter(previousCellId,\"text\");},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */].Content,{visible:true,children:\"Text\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */].Content,{hidden:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */],{name:\"add\"})})]})]})});};/* harmony default export */ var components_add_cell = (add_cell_AddCell);\n// EXTERNAL MODULE: ./src/components/cell-list-item.css\nvar cell_list_item = __webpack_require__(244);\n\n// EXTERNAL MODULE: ./src/components/action-bar.css\nvar action_bar = __webpack_require__(245);\n\n// CONCATENATED MODULE: ./src/components/action-bar.tsx\nvar action_bar_ActionBar=function ActionBar(_ref){var id=_ref.id;var _useActions=use_actions_useActions(),moveCell=_useActions.moveCell,deleteCell=_useActions.deleteCell;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */].Group,{className:\"action-bar\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:\"action-bar-button\",icon:\"arrow up\",onClick:function onClick(){return moveCell(id,\"up\");}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:\"action-bar-button\",icon:\"arrow down\",onClick:function onClick(){return moveCell(id,\"down\");}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:\"action-bar-button\",icon:\"trash alternate\",onClick:function onClick(){return deleteCell(id);}})]});};/* harmony default export */ var components_action_bar = (action_bar_ActionBar);\n// EXTERNAL MODULE: ./src/components/code-cell.css\nvar code_cell = __webpack_require__(246);\n\n// EXTERNAL MODULE: ./src/components/code-editor.css\nvar code_editor = __webpack_require__(247);\n\n// EXTERNAL MODULE: ./node_modules/@monaco-editor/react/lib/es/index.js + 25 modules\nvar lib_es = __webpack_require__(188);\n\n// EXTERNAL MODULE: ./node_modules/prettier/standalone.js\nvar standalone = __webpack_require__(180);\nvar standalone_default = /*#__PURE__*/__webpack_require__.n(standalone);\n\n// EXTERNAL MODULE: ./node_modules/prettier/parser-babel.js\nvar parser_babel = __webpack_require__(181);\nvar parser_babel_default = /*#__PURE__*/__webpack_require__.n(parser_babel);\n\n// CONCATENATED MODULE: ./src/components/code-editor.tsx\nvar code_editor_CodeEditor=function CodeEditor(_ref){var initialValue=_ref.initialValue,onChange=_ref.onChange;var editorRef=Object(react[\"useRef\"])(null);var onEditorMount=function onEditorMount(editor,monaco){editorRef.current=editor;editor.onDidChangeModelContent(function(){onChange(editor.getValue());});};var onFormatClick=function onFormatClick(){// get current value from editor instance\nvar unformatted=editorRef.current.getValue();// format that value\nvar formatted=standalone_default.a.format(unformatted,{parser:\"babel\",plugins:[parser_babel_default.a],useTabs:true,semi:true})// remove new line added by prettier\n.replace(/\\n$/,\"\");// set formatted value back into the editor\neditorRef.current.setValue(formatted);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"editor-wrapper\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */],{icon:true,animated:\"fade\",labelPosition:\"right\",className:\"button-format\",onClick:onFormatClick,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */].Content,{visible:true,className:\"text-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */],{name:\"paint brush\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */].Content,{hidden:true,children:\"Format\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib_es[\"a\" /* default */],{onMount:onEditorMount,value:initialValue,theme:\"vs-dark\",language:\"javascript\",height:\"100%\",options:{wordWrap:\"on\",minimap:{enabled:false},showUnused:false,folding:false,lineNumbersMinChars:3,fontSize:16,scrollBeyondLastLine:false,automaticLayout:true}})]});};/* harmony default export */ var components_code_editor = (code_editor_CodeEditor);\n// EXTERNAL MODULE: ./src/components/preview.css\nvar preview = __webpack_require__(256);\n\n// CONCATENATED MODULE: ./src/components/preview.tsx\n// setup event listener for message and eval the message (bundled code)\n// embed this as inner html in iframe using srcdoc attribute\nvar html=\"\\n    <html>\\n        <head></head>\\n        <body>\\n            <div id=\\\"root\\\"></div>\\n            <script>\\n\\t\\t\\t\\tconst handleError = (err) => {\\n\\t\\t\\t\\t\\tconst root = document.getElementById(\\\"root\\\");\\n\\t\\t\\t\\t\\troot.innerHTML = '<div style=\\\"color: red;\\\"><h4>Runtime Error</h4>' + err + '</div>';\\n\\t\\t\\t\\t\\tconsole.error(err);\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\twindow.addEventListener(\\\"error\\\", (event) => {\\n\\t\\t\\t\\t\\tevent.preventDefault();\\n\\t\\t\\t\\t\\thandleError(event.error);\\n\\t\\t\\t\\t});\\n                window.addEventListener(\\\"message\\\", (event) => {\\n                    try {\\n                        eval(event.data);\\n                    } catch (err) {\\n                        handleError(err);\\n                    }\\n                }, false)\\n            </script>\\n        </body>\\n    </html>\\n\";var preview_Preview=function Preview(_ref){var code=_ref.code,bundleError=_ref.bundleError;var iframe=Object(react[\"useRef\"])();Object(react[\"useEffect\"])(function(){// update srcdoc of iframe to default state to prevent user from deleting html structure by any chance\niframe.current.srcdoc=html;// slightly delay to allow update of srcdoc first\nsetTimeout(function(){// pass bundled code into iframe element via a ref\niframe.current.contentWindow.postMessage(code,\"*\");},50);},[code]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"preview-wrapper\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"iframe\",{title:\"code preview\",ref:iframe,sandbox:\"allow-scripts\",srcDoc:html}),bundleError&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"preview-error\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Compilation Error\"}),bundleError]})]});};/* harmony default export */ var components_preview = (preview_Preview);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./src/components/resizable.css\nvar resizable = __webpack_require__(257);\n\n// EXTERNAL MODULE: ./node_modules/react-resizable/index.js\nvar react_resizable = __webpack_require__(182);\n\n// CONCATENATED MODULE: ./src/components/resizable.tsx\nvar resizable_Resizable=function Resizable(_ref){var direction=_ref.direction,children=_ref.children;var _useState=Object(react[\"useState\"])(window.innerWidth),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),innerWidth=_useState2[0],setInnerWidth=_useState2[1];var _useState3=Object(react[\"useState\"])(window.innerHeight),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),innerHeight=_useState4[0],setInnerHeight=_useState4[1];var _useState5=Object(react[\"useState\"])(window.innerWidth*0.75),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),width=_useState6[0],setWidth=_useState6[1];var resizableAttr;Object(react[\"useEffect\"])(function(){// debounce\nvar timer;var listener=function listener(){if(timer){clearTimeout(timer);}timer=setTimeout(function(){// update states with current window width and height\nsetInnerWidth(window.innerWidth);setInnerHeight(window.innerHeight);if(window.innerWidth*0.75<width){setWidth(window.innerWidth*0.75);}},100);};window.addEventListener(\"resize\",listener);// cleanup\nreturn function(){window.removeEventListener(\"resize\",listener);};},[width]);if(direction===\"horizontal\"){resizableAttr={className:\"resize-horizontal\",width:width,height:Infinity,resizeHandles:[\"e\"],maxConstraints:[innerWidth*0.75,Infinity],minConstraints:[innerWidth*0.2,Infinity],onResizeStop:function onResizeStop(event,data){setWidth(data.size.width);}};}else{resizableAttr={width:Infinity,height:400,resizeHandles:[\"s\"],maxConstraints:[Infinity,innerHeight*0.9],minConstraints:[Infinity,100]};}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_resizable[\"ResizableBox\"],Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},resizableAttr),{},{children:children}));};/* harmony default export */ var components_resizable = (resizable_Resizable);\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js + 2 modules\nvar Segment = __webpack_require__(599);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Loader/Loader.js\nvar Loader = __webpack_require__(597);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(183);\n\n// CONCATENATED MODULE: ./src/hooks/use-cumulative-code.ts\nvar use_cumulative_code_useCumulativeCode=function useCumulativeCode(cellId){return useTypedSelector(function(state){// destructure data and order array from state\nvar _state$cells=state.cells,data=_state$cells.data,order=_state$cells.order;// map over each cell id from order array and return corresponding cell from data array\nvar orderedCells=order.map(function(id){return data[id];});var showFunc=\"\\n        import _React from \\\"react\\\";\\n        import _ReactDOM from \\\"react-dom\\\";\\n        var show = (value) => {\\n            const root = document.getElementById(\\\"root\\\");\\n            if (typeof value === \\\"object\\\") {\\n                if (value.$$typeof && value.props) {\\n                    _ReactDOM.render(value, root)\\n                } else {\\n                    root.innerHTML = JSON.stringify(value)\\n                }\\n            } else {\\n                root.innerHTML = value;\\n            }\\n        };\\n        \";var showFuncNoOp=\"var show = () => {}\";var cumulativeCode=[];var _iterator=Object(createForOfIteratorHelper[\"a\" /* default */])(orderedCells),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var c=_step.value;if(c.type===\"code\"){// if the id is the current cell's id, which is the cell that the user wants to execute, then push the usuable show function to cumulativeCode\nif(c.id===cellId){cumulativeCode.push(showFunc);}else{cumulativeCode.push(showFuncNoOp);}cumulativeCode.push(c.content);}if(c.id===cellId){break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return cumulativeCode;}).join(\"\\n\");};\n// CONCATENATED MODULE: ./src/components/code-cell.tsx\nvar code_cell_CodeCell=function CodeCell(_ref){var cell=_ref.cell;var _useActions=use_actions_useActions(),updateCell=_useActions.updateCell,createBundle=_useActions.createBundle;var bundle=useTypedSelector(function(state){return state.bundles[cell.id];});var cumulativeCode=use_cumulative_code_useCumulativeCode(cell.id);Object(react[\"useEffect\"])(function(){var timer=setTimeout(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:createBundle(cell.id,cumulativeCode);case 1:case\"end\":return _context.stop();}}},_callee);})),750);return function(){clearTimeout(timer);};},// eslint-disable-next-line react-hooks/exhaustive-deps\n[cell.id,cumulativeCode,createBundle]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_resizable,{direction:\"vertical\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{height:\"calc(100% - 10px)\",display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_resizable,{direction:\"horizontal\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_code_editor,{initialValue:cell.content,onChange:function onChange(value){return updateCell(cell.id,value);}})}),!bundle||bundle.loading?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Segment[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Loader[\"a\" /* default */],{active:true,indeterminate:true,children:\"Loading...\"})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_preview,{code:bundle.code,bundleError:bundle.err})]})});};/* harmony default export */ var components_code_cell = (code_cell_CodeCell);\n// EXTERNAL MODULE: ./src/components/text-editor.css\nvar text_editor = __webpack_require__(263);\n\n// EXTERNAL MODULE: ./node_modules/@uiw/react-md-editor/esm/index.js + 298 modules\nvar esm = __webpack_require__(134);\n\n// CONCATENATED MODULE: ./src/components/text-editor.tsx\nvar text_editor_TextEditor=function TextEditor(_ref){var cell=_ref.cell;var ref=Object(react[\"useRef\"])(null);var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useActions=use_actions_useActions(),updateCell=_useActions.updateCell;Object(react[\"useEffect\"])(function(){var listener=function listener(event){if(ref.current&&event.target&&ref.current.contains(event.target)){return;}setEditing(false);};document.addEventListener(\"click\",listener,{capture:true});return function(){document.removeEventListener(\"click\",listener,{capture:true});};},[]);if(editing){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"text-editor\",ref:ref,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* default */],{value:cell.content,onChange:function onChange(value){return updateCell(cell.id,value||\"\");},autoFocus:true})});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Segment[\"a\" /* default */],{className:\"text-editor\",onClick:function onClick(){return setEditing(true);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"card-content\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* default */].Markdown,{source:cell.content||\"*Click to edit*\"})})});};/* harmony default export */ var components_text_editor = (text_editor_TextEditor);\n// CONCATENATED MODULE: ./src/components/cell-list-item.tsx\nvar cell_list_item_CellListItem=function CellListItem(_ref){var cell=_ref.cell;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"cell-list-item\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"action-bar-wrapper\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_action_bar,{id:cell.id})}),cell.type===\"code\"?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_code_cell,{cell:cell}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_text_editor,{cell:cell})]});};/* harmony default export */ var components_cell_list_item = (cell_list_item_CellListItem);\n// CONCATENATED MODULE: ./src/components/cell-list.tsx\nvar cell_list_CellList=function CellList(){// extract state.cells.order and .data from store\n// map over each cell id in order array and return the corresponding cells from data\n// cells variable is an array of cells in order\nvar cells=useTypedSelector(function(_ref){var _ref$cells=_ref.cells,order=_ref$cells.order,data=_ref$cells.data;return order.map(function(id){return data[id];});});// map over each cell in cells, and render a CellListItem for each cell\nvar renderedCells=cells.map(function(cell){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_cell_list_item,{cell:cell}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_add_cell,{previousCellId:cell.id})]},cell.id);});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"cell-list\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_add_cell,{forceVisible:cells.length===0,previousCellId:null}),renderedCells]});};/* harmony default export */ var components_cell_list = (cell_list_CellList);\n// CONCATENATED MODULE: ./src/index.tsx\nvar src_App=function App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Provider */],{store:store,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_cell_list,{})})});};react_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[571,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\index.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\cell-list.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\add-cell.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\cell-list-item.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\action-bar.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\code-cell.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\code-editor.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\preview.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\resizable.css","C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Ryzen\\Desktop\\jbook\\packages\\local-client\\src\\components\\text-editor.css","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/action-types/index.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/reducers/cellsReducer.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/reducers/bundlesReducer.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/reducers/index.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/store.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/bundler/plugins/unpkg-path-plugin.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/bundler/plugins/fetch-plugin.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/bundler/index.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/action-creators/index.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/state/index.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/hooks/use-typed-selector.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/hooks/use-actions.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/add-cell.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/action-bar.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/code-editor.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/preview.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/resizable.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/hooks/use-cumulative-code.ts","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/code-cell.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/text-editor.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/cell-list-item.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/components/cell-list.tsx","C:/Users/Ryzen/Desktop/jbook/packages/local-client/src/index.tsx"],"names":["ActionType","initialState","loading","error","order","data","reducer","state","action","produce","draft","type","UPDATE_CELL","payload","id","content","DELETE_CELL","filter","MOVE_CELL","direction","index","findIndex","targetId","length","INSERT_CELL_AFTER","cell","randomId","foundIndex","unshift","splice","Math","random","toString","substr","BUNDLE_START","code","err","BUNDLE_COMPLETE","bundle","reducers","combineReducers","cells","cellsReducer","bundles","bundlesReducer","store","createStore","applyMiddleware","thunk","dispatch","unpkgPathPlugin","name","setup","build","onResolve","path","namespace","args","URL","resolveDir","href","fileCache","localforage","createInstance","fetchPlugin","inputCode","onLoad","loader","contents","getItem","cachedResult","axios","get","request","escaped","replace","result","responseURL","pathname","setItem","service","rawCode","esbuild","worker","wasmURL","entryPoints","write","plugins","define","global","jsxFactory","jsxFragment","outputFiles","text","Error","message","updateCell","deleteCell","moveCell","insertCellAfter","cellType","createBundle","input","useTypedSelector","useSelector","useActions","useDispatch","useMemo","bindActionCreators","actionCreators","AddCell","previousCellId","forceVisible","ActionBar","CodeEditor","initialValue","onChange","editorRef","useRef","onEditorMount","editor","monaco","current","onDidChangeModelContent","getValue","onFormatClick","unformatted","formatted","prettier","format","parser","useTabs","semi","setValue","wordWrap","minimap","enabled","showUnused","folding","lineNumbersMinChars","fontSize","scrollBeyondLastLine","automaticLayout","html","Preview","bundleError","iframe","useEffect","srcdoc","setTimeout","contentWindow","postMessage","Resizable","children","useState","window","innerWidth","setInnerWidth","innerHeight","setInnerHeight","width","setWidth","resizableAttr","timer","listener","clearTimeout","addEventListener","removeEventListener","className","height","Infinity","resizeHandles","maxConstraints","minConstraints","onResizeStop","event","size","useCumulativeCode","cellId","orderedCells","map","showFunc","showFuncNoOp","cumulativeCode","c","push","join","CodeCell","display","flexDirection","value","TextEditor","ref","editing","setEditing","target","contains","document","capture","CellListItem","CellList","renderedCells","App","ReactDOM","render","getElementById"],"mappings":";;;;;AAAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACO,GAAKA,WAAZ,C,UAAYA,U,EAAAA,U,0BAAAA,U,8BAAAA,U,0CAAAA,U,8BAAAA,U,gCAAAA,U,yCAAAA,U,GAAAA,U;;;;;ACaZ,GAAMC,aAAwB,CAAG,CAChCC,OAAO,CAAE,KADuB,CAEhCC,KAAK,CAAE,IAFyB,CAGhCC,KAAK,CAAE,EAHyB,CAIhCC,IAAI,CAAE,EAJ0B,CAAjC,CAOA,GAAMC,qBAAO,CAAG,QAAVA,QAAU,EAAkE,IAAjEC,MAAiE,2DAA7CN,YAA6C,IAA/BO,OAA+B,2CACjF,MAAOC,qCAAO,CAACF,KAAD,CAAQ,SAACG,KAAD,CAAW,CAChC,OAAQF,MAAM,CAACG,IAAf,EACC,IAAKX,WAAU,CAACY,WAAhB,CACC,oBAAwBJ,MAAM,CAACK,OAA/B,CAAQC,EAAR,iBAAQA,EAAR,CAAYC,OAAZ,iBAAYA,OAAZ,CACAL,KAAK,CAACL,IAAN,CAAWS,EAAX,EAAeC,OAAf,CAAyBA,OAAzB,CACA,MAAOL,MAAP,CACD,IAAKV,WAAU,CAACgB,WAAhB,CACC;AACA,MAAON,MAAK,CAACL,IAAN,CAAWG,MAAM,CAACK,OAAlB,CAAP,CACA;AACAH,KAAK,CAACN,KAAN,CAAcM,KAAK,CAACN,KAAN,CAAYa,MAAZ,CAAmB,SAACH,EAAD,QAAQA,GAAE,GAAKN,MAAM,CAACK,OAAtB,EAAnB,CAAd,CACA,MAAOH,MAAP,CAED,IAAKV,WAAU,CAACkB,SAAhB,CACC,GAAQC,UAAR,CAAsBX,MAAM,CAACK,OAA7B,CAAQM,SAAR,CACA;AACA,GAAMC,MAAK,CAAGV,KAAK,CAACN,KAAN,CAAYiB,SAAZ,CAAsB,SAACP,EAAD,QAAQA,GAAE,GAAKN,MAAM,CAACK,OAAP,CAAeC,EAA9B,EAAtB,CAAd,CACA;AACA,GAAMQ,SAAQ,CAAGH,SAAS,GAAK,IAAd,CAAqBC,KAAK,CAAG,CAA7B,CAAiCA,KAAK,CAAG,CAA1D,CACA;AACA,GAAIE,QAAQ,CAAG,CAAX,EAAgBA,QAAQ,CAAGZ,KAAK,CAACN,KAAN,CAAYmB,MAAZ,CAAqB,CAApD,CAAuD,CACtD,MAAOb,MAAP,CACA,CACD;AACAA,KAAK,CAACN,KAAN,CAAYgB,KAAZ,EAAqBV,KAAK,CAACN,KAAN,CAAYkB,QAAZ,CAArB,CACAZ,KAAK,CAACN,KAAN,CAAYkB,QAAZ,EAAwBd,MAAM,CAACK,OAAP,CAAeC,EAAvC,CACA,MAAOJ,MAAP,CAED,IAAKV,WAAU,CAACwB,iBAAhB,CACC,GAAMC,KAAU,CAAG,CAClBX,EAAE,CAAEY,QAAQ,EADM,CAElBf,IAAI,CAAEH,MAAM,CAACK,OAAP,CAAeF,IAFH,CAGlBI,OAAO,CAAE,EAHS,CAAnB,CAKA;AACAL,KAAK,CAACL,IAAN,CAAWoB,IAAI,CAACX,EAAhB,EAAsBW,IAAtB,CACA;AACA,GAAME,WAAU,CAAGjB,KAAK,CAACN,KAAN,CAAYiB,SAAZ,CAAsB,SAACP,EAAD,QAAQA,GAAE,GAAKN,MAAM,CAACK,OAAP,CAAeC,EAA9B,EAAtB,CAAnB,CACA;AACA,GAAIa,UAAU,GAAK,CAAC,CAApB,CAAuB,CACtBjB,KAAK,CAACN,KAAN,CAAYwB,OAAZ,CAAoBH,IAAI,CAACX,EAAzB,EACA,CAFD,IAEO,CACNJ,KAAK,CAACN,KAAN,CAAYyB,MAAZ,CAAmBF,UAAU,CAAG,CAAhC,CAAmC,CAAnC,CAAsCF,IAAI,CAACX,EAA3C,EACA,CACD,MAAOJ,MAAP,CAED,QACC,MAAOA,MAAP,CA9CF,CAgDA,CAjDa,CAAd,CAkDA,CAnDD,CAqDA,GAAMgB,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACtB,MAAOI,KAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,CAAqC,CAArC,CAAP,CACA,CAFD,CAIe3B,qEAAf,E;;AChEA,GAAML,4BAA0B,CAAG,EAAnC,CAEA,GAAMK,uBAAO,CAAG,QAAVA,QAAU,EAAsE,IAArEC,MAAqE,2DAA/CN,2BAA+C,IAAjCO,OAAiC,2CACrF,MAAOC,qCAAO,CAACF,KAAD,CAAQ,SAACG,KAAD,CAAW,CAChC,OAAQF,MAAM,CAACG,IAAf,EACC,IAAKX,WAAU,CAACkC,YAAhB,CACC;AACAxB,KAAK,CAACF,MAAM,CAACK,OAAP,CAAeC,EAAhB,CAAL,CAA2B,CAC1BZ,OAAO,CAAE,IADiB,CAE1BiC,IAAI,CAAE,EAFoB,CAG1BC,GAAG,CAAE,EAHqB,CAA3B,CAKA,MAAO1B,MAAP,CAED,IAAKV,WAAU,CAACqC,eAAhB,CACC3B,KAAK,CAACF,MAAM,CAACK,OAAP,CAAeC,EAAhB,CAAL,CAA2B,CAC1BZ,OAAO,CAAE,KADiB,CAE1BiC,IAAI,CAAE3B,MAAM,CAACK,OAAP,CAAeyB,MAAf,CAAsBH,IAFF,CAG1BC,GAAG,CAAE5B,MAAM,CAACK,OAAP,CAAeyB,MAAf,CAAsBF,GAHD,CAA3B,CAKA,MAAO1B,MAAP,CAED,QACC,MAAOA,MAAP,CAnBF,CAqBA,CAtBa,CAAd,CAuBA,CAxBD,CA0BeJ,yEAAf,E;;AC1CA;AAKA,GAAMiC,SAAQ,CAAGC,wCAAe,CAAC,CAChCC,KAAK,CAAEC,YADyB,CAEhCC,OAAO,CAAEC,cAFuB,CAAD,CAAhC,CAKeL,2DAAf,E;;ACVA;AAMO,GAAMM,MAAK,CAAGC,oCAAW,CAACP,cAAD,CAAW,EAAX,CAAeQ,wCAAe,CAACC,iCAAD,CAA9B,CAAzB,CAEPH,KAAK,CAACI,QAAN,CAAe,CACdtC,IAAI,CAAEX,UAAU,CAACwB,iBADH,CAEdX,OAAO,CACN,CACCC,EAAE,CAAE,IADL,CAECH,IAAI,CAAE,MAFP,CAHa,CAAf,EAQAkC,KAAK,CAACI,QAAN,CAAe,CACdtC,IAAI,CAAEX,UAAU,CAACwB,iBADH,CAEdX,OAAO,CACN,CACCC,EAAE,CAAE,IADL,CAECH,IAAI,CAAE,MAFP,CAHa,CAAf,E;;;;;;;;;;;;;;ACdO,GAAMuC,kCAAe,CAAG,QAAlBA,gBAAkB,EAAM,CACpC,MAAO,CACN;AACAC,IAAI,CAAE,mBAFA,CAGN;AACAC,KAJM,gBAIAC,KAJA,CAI4B,CACjC;AACA;AACA;AACA;AAEA;AACAA,KAAK,CAACC,SAAN,CAAgB,CAAErC,MAAM,CAAE,eAAV,CAAhB,CAA6C,UAAM,CAClD,MAAO,CAAEsC,IAAI,CAAE,UAAR,CAAoBC,SAAS,CAAE,GAA/B,CAAP,CACA,CAFD,EAIA;AACAH,KAAK,CAACC,SAAN,CAAgB,CAAErC,MAAM,CAAE,QAAV,CAAhB,sHAAsC,iBAAOwC,IAAP,oJAC9B,CACND,SAAS,CAAE,GADL,CAEND,IAAI,CAAE,GAAIG,IAAJ,CAAQD,IAAI,CAACF,IAAb,4BAAuCE,IAAI,CAACE,UAA5C,OAA2DC,IAF3D,CAD8B,wDAAtC,gEAMA;AACAP,KAAK,CAACC,SAAN,CAAgB,CAAErC,MAAM,CAAE,IAAV,CAAhB,uHAAkC,kBAAOwC,IAAP,yJAC1B,CACND,SAAS,CAAE,GADL,CAEND,IAAI,6BAAuBE,IAAI,CAACF,IAA5B,CAFE,CAD0B,0DAAlC,kEAMA,CA7BK,CAAP,CA+BA,CAhCM,C;;;;;;;;;;ACEP,GAAMM,UAAS,CAAGC,qBAAW,CAACC,cAAZ,CAA2B,CAC5CZ,IAAI,CAAE,WADsC,CAA3B,CAAlB,CAIO,GAAMa,yBAAW,CAAG,QAAdA,YAAc,CAACC,SAAD,CAAuB,CACjD,MAAO,CACN;AACAd,IAAI,CAAE,cAFA,CAGNC,KAHM,gBAGAC,KAHA,CAG4B,CACjC;AAEA;AACAA,KAAK,CAACa,MAAN,CAAa,CAAEjD,MAAM,CAAE,eAAV,CAAb,CAA0C,UAAM,CAC/C,MAAO,CACNkD,MAAM,CAAE,KADF,CAENC,QAAQ,CAAEH,SAFJ,CAAP,CAIA,CALD,EAOA;AACAZ,KAAK,CAACa,MAAN,CAAa,CAAEjD,MAAM,CAAE,IAAV,CAAb,sHAA+B,iBAAOwC,IAAP,2JACHI,UAAS,CAACQ,OAAV,CAAwCZ,IAAI,CAACF,IAA7C,CADG,QACxBe,YADwB,mBAG1BA,YAH0B,yDAItBA,YAJsB,wDAA/B,gEAQA;AACAjB,KAAK,CAACa,MAAN,CAAa,CAAEjD,MAAM,CAAE,SAAV,CAAb,uHAAoC,kBAAOwC,IAAP,yMACHc,gBAAK,CAACC,GAAN,CAAUf,IAAI,CAACF,IAAf,CADG,wCAC3BlD,IAD2B,kBAC3BA,IAD2B,CACrBoE,OADqB,kBACrBA,OADqB,CAEnC;AACA;AACMC,OAJ6B,CAInBrE,IAAI,CAACsE,OAAL,CAAa,KAAb,CAAoB,EAApB,EAAwBA,OAAxB,CAAgC,IAAhC,CAAsC,KAAtC,EAA6CA,OAA7C,CAAqD,IAArD,CAA2D,KAA3D,CAJmB,CAK7BP,QAL6B,uGAObM,OAPa,iEAU7BE,MAV6B,CAUE,CACpCT,MAAM,CAAE,KAD4B,CAEpCC,QAAQ,CAAEA,QAF0B,CAGpCT,UAAU,CAAE,GAAID,IAAJ,CAAQ,IAAR,CAAce,OAAO,CAACI,WAAtB,EAAmCC,QAHX,CAVF,yBAe7BjB,UAAS,CAACkB,OAAV,CAAkBtB,IAAI,CAACF,IAAvB,CAA6BqB,MAA7B,CAf6B,0CAgB5BA,MAhB4B,2DAApC,kEAmBA;AACAvB,KAAK,CAACa,MAAN,CAAa,CAAEjD,MAAM,CAAE,IAAV,CAAb,uHAA+B,kBAAOwC,IAAP,yLACEc,gBAAK,CAACC,GAAN,CAAUf,IAAI,CAACF,IAAf,CADF,yCACtBlD,IADsB,mBACtBA,IADsB,CAChBoE,OADgB,mBAChBA,OADgB,CAExBG,MAFwB,CAEO,CACpCT,MAAM,CAAE,KAD4B,CAEpCC,QAAQ,CAAE/D,IAF0B,CAGpCsD,UAAU,CAAE,GAAID,IAAJ,CAAQ,IAAR,CAAce,OAAO,CAACI,WAAtB,EAAmCC,QAHX,CAFP,wBAOxBjB,UAAS,CAACkB,OAAV,CAAkBtB,IAAI,CAACF,IAAvB,CAA6BqB,MAA7B,CAPwB,yCAQvBA,MARuB,0DAA/B,kEAUA,CAtDK,CAAP,CAwDA,CAzDM,C;;ACJP;AACA,GAAII,QAAJ,CAEA,GAAM1C,eAAM,sHAAG,iBAAO2C,OAAP,kIACND,OADM,+CAGPE,sBAAA,CAAmB,CACxBC,MAAM,CAAE,IADgB,CAExBC,OAAO,CAAE,6CAFe,CAAnB,CAHO,QAObJ,OAAO,CAAG,IAAV,CAPa,mEAWQE,iBAAA,CAAc,CAClCG,WAAW,CAAE,CAAE,UAAF,CADqB,CAElC/C,MAAM,CAAE,IAF0B,CAGlCgD,KAAK,CAAE,KAH2B,CAIlCC,OAAO,CAAE,CAAErC,iCAAe,EAAjB,CAAqBc,wBAAW,CAACiB,OAAD,CAAhC,CAJyB,CAKlCO,MAAM,CACL,CACC,uBAAwB,cADzB,CAECC,MAAM,CAAE,QAFT,CANiC,CAUlC;AACAC,UAAU,CAAE,sBAXsB,CAYlCC,WAAW,CAAE,iBAZqB,CAAd,CAXR,QAWPf,MAXO,+CAyBN,CACNzC,IAAI,CAAEyC,MAAM,CAACgB,WAAP,CAAmB,CAAnB,EAAsBC,IADtB,CAENzD,GAAG,CAAE,EAFC,CAzBM,iEA8BT,sBAAe0D,MA9BN,2DA+BL,CACN3D,IAAI,CAAE,EADA,CAENC,GAAG,CAAE,YAAI2D,OAFH,CA/BK,0CAoCL,CACN5D,IAAI,CAAE,EADA,CAENC,GAAG,CAAE,wBAFC,CApCK,uEAAH,kBAANE,OAAM,4CAAZ,CA4CeA,0DAAf,E;;ACtCO,GAAM0D,2BAAU,CAAG,QAAbA,WAAa,CAAClF,EAAD,CAAaC,OAAb,CAAmD,CAC5E,MAAO,CACNJ,IAAI,CAAEX,UAAU,CAACY,WADX,CAENC,OAAO,CACN,CACCC,EAAE,CAAFA,EADD,CAECC,OAAO,CAAPA,OAFD,CAHK,CAAP,CAQA,CATM,CAWA,GAAMkF,2BAAU,CAAG,QAAbA,WAAa,CAACnF,EAAD,CAAkC,CAC3D,MAAO,CACNH,IAAI,CAAEX,UAAU,CAACgB,WADX,CAENH,OAAO,CAAEC,EAFH,CAAP,CAIA,CALM,CAOA,GAAMoF,yBAAQ,CAAG,QAAXA,SAAW,CAACpF,EAAD,CAAaK,SAAb,CAAsD,CAC7E,MAAO,CACNR,IAAI,CAAEX,UAAU,CAACkB,SADX,CAENL,OAAO,CACN,CACCC,EAAE,CAAFA,EADD,CAECK,SAAS,CAATA,SAFD,CAHK,CAAP,CAQA,CATM,CAWA,GAAMgF,gCAAe,CAAG,QAAlBA,gBAAkB,CAACrF,EAAD,CAAoBsF,QAApB,CAAmE,CACjG,MAAO,CACNzF,IAAI,CAAEX,UAAU,CAACwB,iBADX,CAENX,OAAO,CACN,CACCC,EAAE,CAAFA,EADD,CAECH,IAAI,CAAEyF,QAFP,CAHK,CAAP,CAQA,CATM,CAWA,GAAMC,6BAAY,CAAG,QAAfA,aAAe,CAACvF,EAAD,CAAawF,KAAb,CAA+B,CAC1D;AACA;AACA,2HAAO,iBAAOrD,QAAP,+HACNA,QAAQ,CAAC,CACRtC,IAAI,CAAEX,UAAU,CAACkC,YADT,CAERrB,OAAO,CACN,CACCC,EAAE,CAAFA,EADD,CAHO,CAAD,CAAR,CADM,sBASewB,QAAM,CAACgE,KAAD,CATrB,QASA1B,MATA,eAWN3B,QAAQ,CAAC,CACRtC,IAAI,CAAEX,UAAU,CAACqC,eADT,CAERxB,OAAO,CACN,CACCC,EAAE,CAAFA,EADD,CAECwB,MAAM,CAAEsC,MAFT,CAHO,CAAD,CAAR,CAXM,sDAAP,+DAoBA,CAvBM,C;;ACrDP;;;;;;ACGO,GAAM2B,iBAAiD,CAAGC,yBAA1D,C;;;;;;;;ACEA,GAAMC,uBAAU,CAAG,QAAbA,WAAa,EAAM,CAC/B,GAAMxD,SAAQ,CAAGyD,iCAAW,EAA5B,CAEA;AACA,MAAOC,yBAAO,CACb,UAAM,CACL,MAAOC,4CAAkB,CAACC,+BAAD,CAAiB5D,QAAjB,CAAzB,CACA,CAHY,CAIb,CAAEA,QAAF,CAJa,CAAd,CAMA,CAVM,CAYP;AAEA;AAEA;AACA;AACA;AACA,K;;;;;;;;;;;;;;ACfA,GAAM6D,iBAAO,CAAG,QAAVA,QAAU,MAAoD,IAAjDC,eAAiD,MAAjDA,cAAiD,CAAjCC,YAAiC,MAAjCA,YAAiC,CACnE,gBAA4BP,sBAAU,EAAtC,CAAQN,eAAR,aAAQA,eAAR,CAEA,mBACC,2BAAC,0BAAD,EAAS,UAAU,KAAnB,CAAoB,OAAO,KAA3B,uBACC,4BAAC,yBAAD,CAAQ,KAAR,EAAc,SAAS,oBAAca,YAAY,CAAG,eAAH,CAAqB,EAA/C,CAAvB,CAA4E,OAAO,KAAnF,wBACC,4BAAC,yBAAD,EACC,QAAQ,CAAC,MADV,CAEC,SAAS,CAAC,iBAFX,CAGC,OAAO,CAAE,yBAAMb,gBAAe,CAACY,cAAD,CAAiB,MAAjB,CAArB,EAHV,wBAKC,2BAAC,yBAAD,CAAQ,OAAR,EAAgB,OAAO,KAAvB,kBALD,cAMC,2BAAC,yBAAD,CAAQ,OAAR,EAAgB,MAAM,KAAtB,uBACC,2BAAC,uBAAD,EAAM,IAAI,CAAC,KAAX,EADD,EAND,GADD,cAWC,4BAAC,yBAAD,EACC,QAAQ,CAAC,MADV,CAEC,SAAS,CAAC,iBAFX,CAGC,OAAO,CAAE,yBAAMZ,gBAAe,CAACY,cAAD,CAAiB,MAAjB,CAArB,EAHV,wBAKC,2BAAC,yBAAD,CAAQ,OAAR,EAAgB,OAAO,KAAvB,kBALD,cAMC,2BAAC,yBAAD,CAAQ,OAAR,EAAgB,MAAM,KAAtB,uBACC,2BAAC,uBAAD,EAAM,IAAI,CAAC,KAAX,EADD,EAND,GAXD,GADD,EADD,CA0BA,CA7BD,CA+BeD,wEAAf,E;;;;;;;;AChCA,GAAMG,qBAAS,CAAG,QAAZA,UAAY,MAA4B,IAAzBnG,GAAyB,MAAzBA,EAAyB,CAC7C,gBAAiC2F,sBAAU,EAA3C,CAAQP,QAAR,aAAQA,QAAR,CAAkBD,UAAlB,aAAkBA,UAAlB,CAEA,mBACC,4BAAC,yBAAD,CAAQ,KAAR,EAAc,SAAS,CAAC,YAAxB,wBACC,2BAAC,yBAAD,EAAQ,SAAS,CAAC,mBAAlB,CAAsC,IAAI,CAAC,UAA3C,CAAsD,OAAO,CAAE,yBAAMC,SAAQ,CAACpF,EAAD,CAAK,IAAL,CAAd,EAA/D,EADD,cAEC,2BAAC,yBAAD,EAAQ,SAAS,CAAC,mBAAlB,CAAsC,IAAI,CAAC,YAA3C,CAAwD,OAAO,CAAE,yBAAMoF,SAAQ,CAACpF,EAAD,CAAK,MAAL,CAAd,EAAjE,EAFD,cAGC,2BAAC,yBAAD,EAAQ,SAAS,CAAC,mBAAlB,CAAsC,IAAI,CAAC,iBAA3C,CAA6D,OAAO,CAAE,yBAAMmF,WAAU,CAACnF,EAAD,CAAhB,EAAtE,EAHD,GADD,CAOA,CAVD,CAYemG,8EAAf,E;;;;;;;;;;;;;;;;;;;ACRA,GAAMC,uBAAU,CAAG,QAAbA,WAAa,MAA6C,IAA1CC,aAA0C,MAA1CA,YAA0C,CAA5BC,QAA4B,MAA5BA,QAA4B,CAC/D,GAAMC,UAAS,CAAGC,uBAAM,CAAM,IAAN,CAAxB,CAEA,GAAMC,cAAsB,CAAG,QAAzBA,cAAyB,CAACC,MAAD,CAASC,MAAT,CAAoB,CAClDJ,SAAS,CAACK,OAAV,CAAoBF,MAApB,CACAA,MAAM,CAACG,uBAAP,CAA+B,UAAM,CACpCP,QAAQ,CAACI,MAAM,CAACI,QAAP,EAAD,CAAR,CACA,CAFD,EAGA,CALD,CAOA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC3B;AACA,GAAMC,YAAW,CAAGT,SAAS,CAACK,OAAV,CAAkBE,QAAlB,EAApB,CACA;AACA,GAAMG,UAAS,CAAGC,oBAAQ,CACxBC,MADgB,CACTH,WADS,CACI,CACpBI,MAAM,CAAE,OADY,CAEpB3C,OAAO,CAAE,CAAE2C,sBAAF,CAFW,CAGpBC,OAAO,CAAE,IAHW,CAIpBC,IAAI,CAAE,IAJc,CADJ,CAOjB;AAPiB,CAQhBzD,OARgB,CAQR,KARQ,CAQD,EARC,CAAlB,CASA;AACA0C,SAAS,CAACK,OAAV,CAAkBW,QAAlB,CAA2BN,SAA3B,EACA,CAfD,CAiBA,mBACC,mCAAK,SAAS,CAAC,gBAAf,wBACC,4BAAC,yBAAD,EAAQ,IAAI,KAAZ,CAAa,QAAQ,CAAC,MAAtB,CAA6B,aAAa,CAAC,OAA3C,CAAmD,SAAS,CAAC,eAA7D,CAA6E,OAAO,CAAEF,aAAtF,wBACC,2BAAC,yBAAD,CAAQ,OAAR,EAAgB,OAAO,KAAvB,CAAwB,SAAS,CAAC,aAAlC,uBACC,2BAAC,uBAAD,EAAM,IAAI,CAAC,aAAX,EADD,EADD,cAIC,2BAAC,yBAAD,CAAQ,OAAR,EAAgB,MAAM,KAAtB,oBAJD,GADD,cAOC,2BAAC,yBAAD,EACC,OAAO,CAAEN,aADV,CAEC,KAAK,CAAEJ,YAFR,CAGC,KAAK,CAAC,SAHP,CAIC,QAAQ,CAAC,YAJV,CAKC,MAAM,CAAC,MALR,CAMC,OAAO,CAAE,CACRmB,QAAQ,CAAE,IADF,CAERC,OAAO,CACN,CACCC,OAAO,CAAE,KADV,CAHO,CAMRC,UAAU,CAAE,KANJ,CAORC,OAAO,CAAE,KAPD,CAQRC,mBAAmB,CAAE,CARb,CASRC,QAAQ,CAAE,EATF,CAURC,oBAAoB,CAAE,KAVd,CAWRC,eAAe,CAAE,IAXT,CANV,EAPD,GADD,CA8BA,CAzDD,CA2De5B,iFAAf,E;;;;;AC/DA;AACA;AACA,GAAM6B,KAAI,izBAAV,CA2BA,GAAMC,gBAAO,CAAG,QAAVA,QAAU,MAAyC,IAAtC7G,KAAsC,MAAtCA,IAAsC,CAAhC8G,WAAgC,MAAhCA,WAAgC,CACxD,GAAMC,OAAM,CAAG5B,uBAAM,EAArB,CAEA6B,0BAAS,CACR,UAAM,CACL;AACAD,MAAM,CAACxB,OAAP,CAAe0B,MAAf,CAAwBL,IAAxB,CACA;AACAM,UAAU,CAAC,UAAM,CAChB;AACAH,MAAM,CAACxB,OAAP,CAAe4B,aAAf,CAA6BC,WAA7B,CAAyCpH,IAAzC,CAA+C,GAA/C,EACA,CAHS,CAGP,EAHO,CAAV,CAIA,CATO,CAUR,CAAEA,IAAF,CAVQ,CAAT,CAaA,mBACC,mCAAK,SAAS,CAAC,iBAAf,wBACC,qCAAQ,KAAK,CAAC,cAAd,CAA6B,GAAG,CAAE+G,MAAlC,CAA0C,OAAO,CAAC,eAAlD,CAAkE,MAAM,CAAEH,IAA1E,EADD,CAEEE,WAAW,eACX,mCAAK,SAAS,CAAC,eAAf,wBACC,+DADD,CAEEA,WAFF,GAHF,GADD,CAWA,CA3BD,CA6BeD,sEAAf,E;;;;;;;;;;;;;;ACzDA,GAAMQ,oBAAS,CAAG,QAAZA,UAAY,MAA6C,IAA1CrI,UAA0C,MAA1CA,SAA0C,CAA/BsI,QAA+B,MAA/BA,QAA+B,CAC9D,cAAsCC,yBAAQ,CAACC,MAAM,CAACC,UAAR,CAA9C,kEAAQA,UAAR,eAAoBC,aAApB,eACA,eAAwCH,yBAAQ,CAACC,MAAM,CAACG,WAAR,CAAhD,mEAAQA,WAAR,eAAqBC,cAArB,eACA,eAA4BL,yBAAQ,CAACC,MAAM,CAACC,UAAP,CAAoB,IAArB,CAApC,mEAAQI,KAAR,eAAeC,QAAf,eACA,GAAIC,cAAJ,CAEAf,0BAAS,CACR,UAAM,CACL;AACA,GAAIgB,MAAJ,CACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACtB,GAAID,KAAJ,CAAW,CACVE,YAAY,CAACF,KAAD,CAAZ,CACA,CACDA,KAAK,CAAGd,UAAU,CAAC,UAAM,CACxB;AACAQ,aAAa,CAACF,MAAM,CAACC,UAAR,CAAb,CACAG,cAAc,CAACJ,MAAM,CAACG,WAAR,CAAd,CACA,GAAIH,MAAM,CAACC,UAAP,CAAoB,IAApB,CAA2BI,KAA/B,CAAsC,CACrCC,QAAQ,CAACN,MAAM,CAACC,UAAP,CAAoB,IAArB,CAAR,CACA,CACD,CAPiB,CAOf,GAPe,CAAlB,CAQA,CAZD,CAaAD,MAAM,CAACW,gBAAP,CAAwB,QAAxB,CAAkCF,QAAlC,EACA;AACA,MAAO,WAAM,CACZT,MAAM,CAACY,mBAAP,CAA2B,QAA3B,CAAqCH,QAArC,EACA,CAFD,CAGA,CAtBO,CAuBR,CAAEJ,KAAF,CAvBQ,CAAT,CA0BA,GAAI7I,SAAS,GAAK,YAAlB,CAAgC,CAC/B+I,aAAa,CAAG,CACfM,SAAS,CAAE,mBADI,CAEfR,KAAK,CAALA,KAFe,CAGfS,MAAM,CAAEC,QAHO,CAIfC,aAAa,CAAE,CAAE,GAAF,CAJA,CAKfC,cAAc,CAAE,CAAEhB,UAAU,CAAG,IAAf,CAAqBc,QAArB,CALD,CAMfG,cAAc,CAAE,CAAEjB,UAAU,CAAG,GAAf,CAAoBc,QAApB,CAND,CAOfI,YAAY,CACX,sBAACC,KAAD,CAAQ1K,IAAR,CAAiB,CAChB4J,QAAQ,CAAC5J,IAAI,CAAC2K,IAAL,CAAUhB,KAAX,CAAR,CACA,CAVa,CAAhB,CAYA,CAbD,IAaO,CACNE,aAAa,CAAG,CACfF,KAAK,CAAEU,QADQ,CAEfD,MAAM,CAAE,GAFO,CAGfE,aAAa,CAAE,CAAE,GAAF,CAHA,CAIfC,cAAc,CAAE,CAAEF,QAAF,CAAYZ,WAAW,CAAG,GAA1B,CAJD,CAKfe,cAAc,CAAE,CAAEH,QAAF,CAAY,GAAZ,CALD,CAAhB,CAOA,CACD,mBAAO,2BAAC,+BAAD,sFAAkBR,aAAlB,eAAkCT,QAAlC,GAAP,CACA,CAvDD,CAyDeD,4EAAf,E;;;;;;;;;;;AChEO,GAAMyB,sCAAiB,CAAG,QAApBA,kBAAoB,CAACC,MAAD,CAAoB,CACpD,MAAO3E,iBAAgB,CAAC,SAAChG,KAAD,CAAW,CAClC;AACA,iBAAwBA,KAAK,CAACkC,KAA9B,CAAQpC,IAAR,cAAQA,IAAR,CAAcD,KAAd,cAAcA,KAAd,CACA;AACA,GAAM+K,aAAY,CAAG/K,KAAK,CAACgL,GAAN,CAAU,SAACtK,EAAD,QAAQT,KAAI,CAACS,EAAD,CAAZ,EAAV,CAArB,CACA,GAAMuK,SAAQ,4hBAAd,CAgBA,GAAMC,aAAY,CAAG,qBAArB,CACA,GAAMC,eAAc,CAAG,EAAvB,CAtBkC,mEAuBpBJ,YAvBoB,YAuBlC,+CAA4B,IAAnBK,EAAmB,aAC3B,GAAIA,CAAC,CAAC7K,IAAF,GAAW,MAAf,CAAuB,CACtB;AACA,GAAI6K,CAAC,CAAC1K,EAAF,GAASoK,MAAb,CAAqB,CACpBK,cAAc,CAACE,IAAf,CAAoBJ,QAApB,EACA,CAFD,IAEO,CACNE,cAAc,CAACE,IAAf,CAAoBH,YAApB,EACA,CACDC,cAAc,CAACE,IAAf,CAAoBD,CAAC,CAACzK,OAAtB,EACA,CACD,GAAIyK,CAAC,CAAC1K,EAAF,GAASoK,MAAb,CAAqB,CACpB,MACA,CACD,CApCiC,qDAqClC,MAAOK,eAAP,CACA,CAtCsB,CAAhB,CAsCJG,IAtCI,CAsCC,IAtCD,CAAP,CAuCA,CAxCM,C;;ACaP,GAAMC,mBAAQ,CAAG,QAAXA,SAAW,MAA6B,IAA1BlK,KAA0B,MAA1BA,IAA0B,CAC7C,gBAAqCgF,sBAAU,EAA/C,CAAQT,UAAR,aAAQA,UAAR,CAAoBK,YAApB,aAAoBA,YAApB,CACA,GAAM/D,OAAM,CAAGiE,gBAAgB,CAAC,SAAAhG,KAAK,QAAIA,MAAK,CAACoC,OAAN,CAAclB,IAAI,CAACX,EAAnB,CAAJ,EAAN,CAA/B,CACA,GAAMyK,eAAc,CAAGN,qCAAiB,CAACxJ,IAAI,CAACX,EAAN,CAAxC,CAEAqI,0BAAS,CACR,UAAM,CACL,GAAMgB,MAAK,CAAGd,UAAU,kGAAC,qIACxBhD,YAAY,CAAC5E,IAAI,CAACX,EAAN,CAAUyK,cAAV,CAAZ,CADwB,sDAAD,GAErB,GAFqB,CAAxB,CAIA,MAAO,WAAM,CACZlB,YAAY,CAACF,KAAD,CAAZ,CACA,CAFD,CAGA,CATO,CAUR;AACA,CAAE1I,IAAI,CAACX,EAAP,CAAWyK,cAAX,CAA2BlF,YAA3B,CAXQ,CAAT,CAcA,mBACC,2BAAC,oBAAD,EAAW,SAAS,CAAC,UAArB,uBACC,mCACC,KAAK,CAAE,CACNoE,MAAM,CAAE,mBADF,CAENmB,OAAO,CAAE,MAFH,CAGNC,aAAa,CAAE,KAHT,CADR,wBAOC,2BAAC,oBAAD,EAAW,SAAS,CAAC,YAArB,uBACC,2BAAC,sBAAD,EACC,YAAY,CAAEpK,IAAI,CAACV,OADpB,CAEC,QAAQ,CAAE,kBAAA+K,KAAK,QAAI9F,WAAU,CAACvE,IAAI,CAACX,EAAN,CAAUgL,KAAV,CAAd,EAFhB,EADD,EAPD,CAaE,CAACxJ,MAAD,EAAWA,MAAM,CAACpC,OAAlB,cACA,2BAAC,0BAAD,wBACC,2BAAC,yBAAD,EAAQ,MAAM,KAAd,CAAe,aAAa,KAA5B,wBADD,EADA,cAOA,2BAAC,kBAAD,EAAS,IAAI,CAAEoC,MAAM,CAACH,IAAtB,CAA4B,WAAW,CAAEG,MAAM,CAACF,GAAhD,EApBF,GADD,EADD,CAgCA,CAnDD,CAqDeuJ,2EAAf,E;;;;;;;;ACzDA,GAAMI,uBAAU,CAAG,QAAbA,WAAa,MAA+B,IAA5BtK,KAA4B,MAA5BA,IAA4B,CACjD,GAAMuK,IAAG,CAAG1E,uBAAM,CAAwB,IAAxB,CAAlB,CACA,cAAgCoC,yBAAQ,CAAC,KAAD,CAAxC,kEAAQuC,OAAR,eAAiBC,UAAjB,eACA,gBAAuBzF,sBAAU,EAAjC,CAAQT,UAAR,aAAQA,UAAR,CAEAmD,0BAAS,CAAC,UAAM,CACf,GAAMiB,SAAQ,CAAG,QAAXA,SAAW,CAACW,KAAD,CAAuB,CACvC,GAAIiB,GAAG,CAACtE,OAAJ,EAAeqD,KAAK,CAACoB,MAArB,EAA+BH,GAAG,CAACtE,OAAJ,CAAY0E,QAAZ,CAAqBrB,KAAK,CAACoB,MAA3B,CAAnC,CAA+E,CAC9E,OACA,CACDD,UAAU,CAAC,KAAD,CAAV,CACA,CALD,CAMAG,QAAQ,CAAC/B,gBAAT,CAA0B,OAA1B,CAAmCF,QAAnC,CAA6C,CAAEkC,OAAO,CAAE,IAAX,CAA7C,EACA,MAAO,WAAM,CACZD,QAAQ,CAAC9B,mBAAT,CAA6B,OAA7B,CAAsCH,QAAtC,CAAgD,CAAEkC,OAAO,CAAE,IAAX,CAAhD,EACA,CAFD,CAGA,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAIL,OAAJ,CAAa,CACZ,mBACC,kCAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAED,GAAlC,uBACC,2BAAC,sBAAD,EAAU,KAAK,CAAEvK,IAAI,CAACV,OAAtB,CAA+B,QAAQ,CAAE,kBAAC+K,KAAD,QAAW9F,WAAU,CAACvE,IAAI,CAACX,EAAN,CAAUgL,KAAK,EAAI,EAAnB,CAArB,EAAzC,CAAsF,SAAS,KAA/F,EADD,EADD,CAKA,CAED,mBACC,2BAAC,0BAAD,EAAS,SAAS,CAAC,aAAnB,CAAiC,OAAO,CAAE,yBAAMI,WAAU,CAAC,IAAD,CAAhB,EAA1C,uBACC,kCAAK,SAAS,CAAC,cAAf,uBACC,2BAAC,sBAAD,CAAU,QAAV,EAAmB,MAAM,CAAEzK,IAAI,CAACV,OAAL,EAAgB,iBAA3C,EADD,EADD,EADD,CAOA,CAjCD,CAmCegL,iFAAf,E;;ACrCA,GAAMQ,4BAAY,CAAG,QAAfA,aAAe,MAAiC,IAA9B9K,KAA8B,MAA9BA,IAA8B,CACrD,mBACC,mCAAK,SAAS,CAAC,gBAAf,wBACC,kCAAK,SAAS,CAAC,oBAAf,uBACC,2BAAC,qBAAD,EAAW,EAAE,CAAEA,IAAI,CAACX,EAApB,EADD,EADD,CAIEW,IAAI,CAACd,IAAL,GAAc,MAAd,cAAuB,2BAAC,oBAAD,EAAU,IAAI,CAAEc,IAAhB,EAAvB,cAAkD,2BAAC,sBAAD,EAAY,IAAI,CAAEA,IAAlB,EAJpD,GADD,CAQA,CATD,CAWe8K,yFAAf,E;;ACfA,GAAMC,mBAAQ,CAAG,QAAXA,SAAW,EAAM,CACtB;AACA;AACA;AACA,GAAM/J,MAAK,CAAG8D,gBAAgB,CAAC,mCAAG9D,KAAH,CAAYrC,KAAZ,YAAYA,KAAZ,CAAmBC,IAAnB,YAAmBA,IAAnB,OAAgCD,MAAK,CAACgL,GAAN,CAAU,SAACtK,EAAD,QAAQT,KAAI,CAACS,EAAD,CAAZ,EAAV,CAAhC,EAAD,CAA9B,CACA;AACA,GAAM2L,cAAa,CAAGhK,KAAK,CAAC2I,GAAN,CAAU,SAAC3J,IAAD,CAAU,CACzC,mBACC,0DACC,2BAAC,yBAAD,EAAc,IAAI,CAAEA,IAApB,EADD,cAEC,2BAAC,mBAAD,EAAS,cAAc,CAAEA,IAAI,CAACX,EAA9B,EAFD,GAAUW,IAAI,CAACX,EAAf,CADD,CAMA,CAPqB,CAAtB,CASA,mBACC,mCAAK,SAAS,CAAC,WAAf,wBACC,2BAAC,mBAAD,EAAS,YAAY,CAAE2B,KAAK,CAAClB,MAAN,GAAiB,CAAxC,CAA2C,cAAc,CAAE,IAA3D,EADD,CAEEkL,aAFF,GADD,CAMA,CArBD,CAuBeD,2EAAf,E;;ACrBA,GAAME,QAAG,CAAG,QAANA,IAAM,EAAM,CACjB,mBACC,2BAAC,sBAAD,EAAU,KAAK,CAAE7J,KAAjB,uBACC,wDACC,2BAAC,oBAAD,IADD,EADD,EADD,CAOA,CARD,CAUA8J,mBAAQ,CAACC,MAAT,cAAgB,2BAAC,OAAD,IAAhB,CAAyBP,QAAQ,CAACQ,cAAT,CAAwB,MAAxB,CAAzB,E","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// export file for action.type\r\nexport enum ActionType {\r\n\tMOVE_CELL = \"move_cell\",\r\n\tDELETE_CELL = \"delete_cell\",\r\n\tINSERT_CELL_AFTER = \"insert_cell_after\",\r\n\tUPDATE_CELL = \"update_cell\",\r\n\tBUNDLE_START = \"bundle_start\",\r\n\tBUNDLE_COMPLETE = \"bundle_complete\"\r\n}\r\n","import produce from \"immer\";\r\nimport { ActionType } from \"../action-types\";\r\nimport { Action } from \"../actions\";\r\nimport { Cell } from \"../cell\";\r\n\r\ninterface CellsState {\r\n\tloading: boolean;\r\n\terror: string | null;\r\n\torder: string[];\r\n\tdata: {\r\n\t\t[key: string]: Cell;\r\n\t};\r\n}\r\n\r\nconst initialState: CellsState = {\r\n\tloading: false,\r\n\terror: null,\r\n\torder: [],\r\n\tdata: {}\r\n};\r\n\r\nconst reducer = (state: CellsState = initialState, action: Action): CellsState => {\r\n\treturn produce(state, (draft) => {\r\n\t\tswitch (action.type) {\r\n\t\t\tcase ActionType.UPDATE_CELL:\r\n\t\t\t\tconst { id, content } = action.payload;\r\n\t\t\t\tdraft.data[id].content = content;\r\n\t\t\t\treturn draft;\r\n\t\t\tcase ActionType.DELETE_CELL:\r\n\t\t\t\t// delete cell\r\n\t\t\t\tdelete draft.data[action.payload];\r\n\t\t\t\t// delete cell id from order array\r\n\t\t\t\tdraft.order = draft.order.filter((id) => id !== action.payload);\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tcase ActionType.MOVE_CELL:\r\n\t\t\t\tconst { direction } = action.payload;\r\n\t\t\t\t// index of cell\r\n\t\t\t\tconst index = draft.order.findIndex((id) => id === action.payload.id);\r\n\t\t\t\t// new index of cell depending on move direction\r\n\t\t\t\tconst targetId = direction === \"up\" ? index - 1 : index + 1;\r\n\t\t\t\t// ensure new index is within bounds of order array\r\n\t\t\t\tif (targetId < 0 || targetId > draft.order.length - 1) {\r\n\t\t\t\t\treturn draft;\r\n\t\t\t\t}\r\n\t\t\t\t// swap\r\n\t\t\t\tdraft.order[index] = draft.order[targetId];\r\n\t\t\t\tdraft.order[targetId] = action.payload.id;\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tcase ActionType.INSERT_CELL_AFTER:\r\n\t\t\t\tconst cell: Cell = {\r\n\t\t\t\t\tid: randomId(),\r\n\t\t\t\t\ttype: action.payload.type,\r\n\t\t\t\t\tcontent: \"\"\r\n\t\t\t\t};\r\n\t\t\t\t// insert cell into data array, which contains all the cells and their ids\r\n\t\t\t\tdraft.data[cell.id] = cell;\r\n\t\t\t\t// find index of cell to insert after\r\n\t\t\t\tconst foundIndex = draft.order.findIndex((id) => id === action.payload.id);\r\n\t\t\t\t// if index is -1 (means no index was found for that id), add cell to start of order array\r\n\t\t\t\tif (foundIndex === -1) {\r\n\t\t\t\t\tdraft.order.unshift(cell.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdraft.order.splice(foundIndex + 1, 0, cell.id);\r\n\t\t\t\t}\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn draft;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nconst randomId = () => {\r\n\treturn Math.random().toString(36).substr(2, 5);\r\n};\r\n\r\nexport default reducer;\r\n","import produce from \"immer\";\r\nimport { ActionType } from \"../action-types\";\r\nimport { Action } from \"../actions\";\r\n\r\ninterface BundlesState {\r\n\t[key: string]:\r\n\t\t| {\r\n\t\t\t\tloading: boolean;\r\n\t\t\t\tcode: string;\r\n\t\t\t\terr: string;\r\n\t\t\t}\r\n\t\t| undefined; // this is because, initially when a code cell is loaded up, there is no content inside which results in the createBundle action returning bundle as undefined, which in turn results in an error when previewing bundle.code beside the code cell\r\n}\r\n\r\nconst initialState: BundlesState = {};\r\n\r\nconst reducer = (state: BundlesState = initialState, action: Action): BundlesState => {\r\n\treturn produce(state, (draft) => {\r\n\t\tswitch (action.type) {\r\n\t\t\tcase ActionType.BUNDLE_START:\r\n\t\t\t\t// id of code cell to bundle\r\n\t\t\t\tdraft[action.payload.id] = {\r\n\t\t\t\t\tloading: true,\r\n\t\t\t\t\tcode: \"\",\r\n\t\t\t\t\terr: \"\"\r\n\t\t\t\t};\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tcase ActionType.BUNDLE_COMPLETE:\r\n\t\t\t\tdraft[action.payload.id] = {\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tcode: action.payload.bundle.code,\r\n\t\t\t\t\terr: action.payload.bundle.err\r\n\t\t\t\t};\r\n\t\t\t\treturn draft;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn draft;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport default reducer;\r\n","// export file for all reducers combined\r\nimport { combineReducers } from \"redux\";\r\nimport cellsReducer from \"./cellsReducer\";\r\nimport bundlesReducer from \"./bundlesReducer\";\r\n\r\nconst reducers = combineReducers({\r\n\tcells: cellsReducer,\r\n\tbundles: bundlesReducer\r\n});\r\n\r\nexport default reducers;\r\n\r\nexport type RootState = ReturnType<typeof reducers>;\r\n","// export file for redux store\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { ActionType } from \"./action-types\";\r\nimport reducers from \"./reducers\";\r\n\r\nexport const store = createStore(reducers, {}, applyMiddleware(thunk));\r\n\r\nstore.dispatch({\r\n\ttype: ActionType.INSERT_CELL_AFTER,\r\n\tpayload:\r\n\t\t{\r\n\t\t\tid: null,\r\n\t\t\ttype: \"text\"\r\n\t\t}\r\n});\r\nstore.dispatch({\r\n\ttype: ActionType.INSERT_CELL_AFTER,\r\n\tpayload:\r\n\t\t{\r\n\t\t\tid: null,\r\n\t\t\ttype: \"code\"\r\n\t\t}\r\n});\r\n","import * as esbuild from \"esbuild-wasm\";\r\n\r\nexport const unpkgPathPlugin = () => {\r\n\treturn {\r\n\t\t// name is mainly to identify this plugin for debugging purposes\r\n\t\tname: \"unpkg-path-plugin\",\r\n\t\t// setup of bundling process\r\n\t\tsetup(build: esbuild.PluginBuild) {\r\n\t\t\t// onResolve event listener (override esbuild's default process of figuring out where the main file is stored)\r\n\t\t\t// can have multiple onResolve functions for different types of files, with the regex filter changing to look for the different types of files\r\n\t\t\t// return path to where the main file is stored (in this case, index.js as defined in the \"entry point\")\r\n\t\t\t// namespace is an \"identifier\" which can be used in onLoad to apply the onLoad function to only the files with the specified namespace\r\n\r\n\t\t\t// handle root entry file of index.js\r\n\t\t\tbuild.onResolve({ filter: /(^index\\.js$)/ }, () => {\r\n\t\t\t\treturn { path: \"index.js\", namespace: \"a\" };\r\n\t\t\t});\r\n\r\n\t\t\t// handle relative paths in a module\r\n\t\t\tbuild.onResolve({ filter: /^\\.+\\// }, async (args: any) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnamespace: \"a\",\r\n\t\t\t\t\tpath: new URL(args.path, `https://unpkg.com${args.resolveDir}/`).href\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\t// handle main file of a module\r\n\t\t\tbuild.onResolve({ filter: /.*/ }, async (args: any) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnamespace: \"a\",\r\n\t\t\t\t\tpath: `https://unpkg.com/${args.path}`\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n};\r\n","import * as esbuild from \"esbuild-wasm\";\r\nimport axios from \"axios\";\r\nimport localforage from \"localforage\";\r\n\r\nconst fileCache = localforage.createInstance({\r\n\tname: \"filecache\"\r\n});\r\n\r\nexport const fetchPlugin = (inputCode: string) => {\r\n\treturn {\r\n\t\t// name is mainly to identify this plugin for debugging purposes\r\n\t\tname: \"fetch-plugin\",\r\n\t\tsetup(build: esbuild.PluginBuild) {\r\n\t\t\t// onLoad event listener (override esbuild's default file loading process)\r\n\r\n\t\t\t// handle root entry file of index.js\r\n\t\t\tbuild.onLoad({ filter: /(^index\\.js$)/ }, () => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tloader: \"jsx\",\r\n\t\t\t\t\tcontents: inputCode\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\t// handle check to see if file has already been fetched and if it is in the cache\r\n\t\t\tbuild.onLoad({ filter: /.*/ }, async (args: any) => {\r\n\t\t\t\tconst cachedResult = await fileCache.getItem<esbuild.OnLoadResult>(args.path);\r\n\t\t\t\t// If it is in the cache, return it immediately\r\n\t\t\t\tif (cachedResult) {\r\n\t\t\t\t\treturn cachedResult;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//handle css files\r\n\t\t\tbuild.onLoad({ filter: /(.css$)/ }, async (args: any) => {\r\n\t\t\t\tconst { data, request } = await axios.get(args.path);\r\n\t\t\t\t// workaround to get css files as esbuild does not support importing css files from js files as of now\r\n\t\t\t\t// comb through the css file to replace all new lines, single and double quotes\r\n\t\t\t\tconst escaped = data.replace(/\\n/g, \"\").replace(/\"/g, '\\\\\"').replace(/'/g, \"\\\\'\");\r\n\t\t\t\tconst contents = `\r\n\t\t\t\t\tconst style = document.createElement(\"style\");\r\n\t\t\t\t\tstyle.innerText = \"${escaped}\";\r\n\t\t\t\t\tdocument.head.appendChild(style);\r\n\t\t\t\t\t`;\r\n\t\t\t\tconst result: esbuild.OnLoadResult = {\r\n\t\t\t\t\tloader: \"jsx\",\r\n\t\t\t\t\tcontents: contents,\r\n\t\t\t\t\tresolveDir: new URL(\"./\", request.responseURL).pathname\r\n\t\t\t\t};\r\n\t\t\t\tawait fileCache.setItem(args.path, result);\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\r\n\t\t\t// handle all other files\r\n\t\t\tbuild.onLoad({ filter: /.*/ }, async (args: any) => {\r\n\t\t\t\tconst { data, request } = await axios.get(args.path);\r\n\t\t\t\tconst result: esbuild.OnLoadResult = {\r\n\t\t\t\t\tloader: \"jsx\",\r\n\t\t\t\t\tcontents: data,\r\n\t\t\t\t\tresolveDir: new URL(\"./\", request.responseURL).pathname\r\n\t\t\t\t};\r\n\t\t\t\tawait fileCache.setItem(args.path, result);\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n};\r\n","import * as esbuild from \"esbuild-wasm\";\r\nimport { unpkgPathPlugin } from \"./plugins/unpkg-path-plugin\";\r\nimport { fetchPlugin } from \"./plugins/fetch-plugin\";\r\n\r\n// to check if esbuild has been initialized\r\nlet service: boolean;\r\n\r\nconst bundle = async (rawCode: string) => {\r\n\twhile (!service) {\r\n\t\t// initialize esbuild\r\n\t\tawait esbuild.initialize({\r\n\t\t\tworker: true,\r\n\t\t\twasmURL: \"https://unpkg.com/esbuild-wasm/esbuild.wasm\"\r\n\t\t});\r\n\t\tservice = true;\r\n\t}\r\n\t// bundle code\r\n\ttry {\r\n\t\tconst result = await esbuild.build({\r\n\t\t\tentryPoints: [ \"index.js\" ],\r\n\t\t\tbundle: true,\r\n\t\t\twrite: false,\r\n\t\t\tplugins: [ unpkgPathPlugin(), fetchPlugin(rawCode) ],\r\n\t\t\tdefine:\r\n\t\t\t\t{\r\n\t\t\t\t\t\"process.env.NODE_ENV\": '\"production\"',\r\n\t\t\t\t\tglobal: \"window\"\r\n\t\t\t\t},\r\n\t\t\t// configure esbuild to use _React for the show() function to prevent naming collision with \"import React ...\"\r\n\t\t\tjsxFactory: \"_React.createElement\",\r\n\t\t\tjsxFragment: \"_React.Fragment\"\r\n\t\t});\r\n\t\treturn {\r\n\t\t\tcode: result.outputFiles[0].text,\r\n\t\t\terr: \"\"\r\n\t\t};\r\n\t} catch (err) {\r\n\t\tif (err instanceof Error) {\r\n\t\t\treturn {\r\n\t\t\t\tcode: \"\",\r\n\t\t\t\terr: err.message\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tcode: \"\",\r\n\t\t\t\terr: \"An error has occurred!\"\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default bundle;\r\n","import { Dispatch } from \"react\";\r\nimport { ActionType } from \"../action-types\";\r\nimport {\r\n\tAction,\r\n\tDirection,\r\n\tUpdateCellAction,\r\n\tDeleteCellAction,\r\n\tMoveCellAction,\r\n\tInsertCellAfterAction\r\n} from \"../actions\";\r\nimport { CellTypes } from \"../cell\";\r\nimport bundle from \"../../bundler\";\r\n\r\nexport const updateCell = (id: string, content: string): UpdateCellAction => {\r\n\treturn {\r\n\t\ttype: ActionType.UPDATE_CELL,\r\n\t\tpayload:\r\n\t\t\t{\r\n\t\t\t\tid,\r\n\t\t\t\tcontent\r\n\t\t\t}\r\n\t};\r\n};\r\n\r\nexport const deleteCell = (id: string): DeleteCellAction => {\r\n\treturn {\r\n\t\ttype: ActionType.DELETE_CELL,\r\n\t\tpayload: id\r\n\t};\r\n};\r\n\r\nexport const moveCell = (id: string, direction: Direction): MoveCellAction => {\r\n\treturn {\r\n\t\ttype: ActionType.MOVE_CELL,\r\n\t\tpayload:\r\n\t\t\t{\r\n\t\t\t\tid,\r\n\t\t\t\tdirection\r\n\t\t\t}\r\n\t};\r\n};\r\n\r\nexport const insertCellAfter = (id: string | null, cellType: CellTypes): InsertCellAfterAction => {\r\n\treturn {\r\n\t\ttype: ActionType.INSERT_CELL_AFTER,\r\n\t\tpayload:\r\n\t\t\t{\r\n\t\t\t\tid,\r\n\t\t\t\ttype: cellType\r\n\t\t\t}\r\n\t};\r\n};\r\n\r\nexport const createBundle = (id: string, input: string) => {\r\n\t// utilising redux thunk for bundling (async)\r\n\t// type annotation for dispatch is to make sure we only call dispatch with an actual action with a payload\r\n\treturn async (dispatch: Dispatch<Action>) => {\r\n\t\tdispatch({\r\n\t\t\ttype: ActionType.BUNDLE_START,\r\n\t\t\tpayload:\r\n\t\t\t\t{\r\n\t\t\t\t\tid\r\n\t\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst result = await bundle(input);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ActionType.BUNDLE_COMPLETE,\r\n\t\t\tpayload:\r\n\t\t\t\t{\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tbundle: result\r\n\t\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\n","// main export file for everything related to redux\r\nexport * from \"./store\";\r\nexport * from \"./reducers\";\r\nexport * from \"./cell\";\r\nexport * as actionCreators from \"./action-creators\"","import { useSelector, TypedUseSelectorHook } from \"react-redux\";\r\nimport { RootState } from \"../state\";\r\n\r\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { useMemo } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { actionCreators } from \"../state\";\r\n\r\nexport const useActions = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\t// useMemo is used here to only bind the action creators once, if not, in the code cell component, every time useActions is called, it will bind the action creators again resulting in a \"different\" createBundle which will cause the useEffect hook to run again, causing an infinite loop of the bundling process\r\n\treturn useMemo(\r\n\t\t() => {\r\n\t\t\treturn bindActionCreators(actionCreators, dispatch);\r\n\t\t},\r\n\t\t[ dispatch ]\r\n\t);\r\n};\r\n\r\n// bindActionCreators will return a dispatch wrapped function for each action creator so we can just utilise useActions() this way:\r\n\r\n// const { updateCell } = useActions()\r\n\r\n// updateCell({\r\n//     type: ...,\r\n//     payload: ...\r\n// })\r\n","import \"./add-cell.css\";\r\nimport { useActions } from \"../hooks/use-actions\";\r\nimport { Button, Icon, Divider } from \"semantic-ui-react\";\r\n\r\ninterface AddCellProps {\r\n\tpreviousCellId: string | null;\r\n\tforceVisible?: boolean;\r\n}\r\n\r\nconst AddCell = ({ previousCellId, forceVisible }: AddCellProps) => {\r\n\tconst { insertCellAfter } = useActions();\r\n\r\n\treturn (\r\n\t\t<Divider horizontal section>\r\n\t\t\t<Button.Group className={`add-cell ${forceVisible ? \"force-visible\" : \"\"}`} compact>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tanimated=\"fade\"\r\n\t\t\t\t\tclassName=\"add-cell-button\"\r\n\t\t\t\t\tonClick={() => insertCellAfter(previousCellId, \"code\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button.Content visible>Code</Button.Content>\r\n\t\t\t\t\t<Button.Content hidden>\r\n\t\t\t\t\t\t<Icon name=\"add\" />\r\n\t\t\t\t\t</Button.Content>\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tanimated=\"fade\"\r\n\t\t\t\t\tclassName=\"add-cell-button\"\r\n\t\t\t\t\tonClick={() => insertCellAfter(previousCellId, \"text\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button.Content visible>Text</Button.Content>\r\n\t\t\t\t\t<Button.Content hidden>\r\n\t\t\t\t\t\t<Icon name=\"add\" />\r\n\t\t\t\t\t</Button.Content>\r\n\t\t\t\t</Button>\r\n\t\t\t</Button.Group>\r\n\t\t</Divider>\r\n\t);\r\n};\r\n\r\nexport default AddCell;\r\n","import \"./action-bar.css\";\r\nimport { useActions } from \"../hooks/use-actions\";\r\nimport { Button } from \"semantic-ui-react\";\r\n\r\ninterface ActionBarProps {\r\n\tid: string;\r\n}\r\n\r\nconst ActionBar = ({ id }: ActionBarProps) => {\r\n\tconst { moveCell, deleteCell } = useActions();\r\n\r\n\treturn (\r\n\t\t<Button.Group className=\"action-bar\">\r\n\t\t\t<Button className=\"action-bar-button\" icon=\"arrow up\" onClick={() => moveCell(id, \"up\")} />\r\n\t\t\t<Button className=\"action-bar-button\" icon=\"arrow down\" onClick={() => moveCell(id, \"down\")} />\r\n\t\t\t<Button className=\"action-bar-button\" icon=\"trash alternate\" onClick={() => deleteCell(id)} />\r\n\t\t</Button.Group>\r\n\t);\r\n};\r\n\r\nexport default ActionBar;\r\n","import \"./code-editor.css\";\r\nimport { useRef } from \"react\";\r\nimport Editor, { OnMount } from \"@monaco-editor/react\";\r\nimport prettier from \"prettier\";\r\nimport parser from \"prettier/parser-babel\";\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\n\r\ninterface EditorProps {\r\n\tinitialValue: string;\r\n\tonChange(value: string): void;\r\n}\r\n\r\nconst CodeEditor = ({ initialValue, onChange }: EditorProps) => {\r\n\tconst editorRef = useRef<any>(null);\r\n\r\n\tconst onEditorMount: OnMount = (editor, monaco) => {\r\n\t\teditorRef.current = editor;\r\n\t\teditor.onDidChangeModelContent(() => {\r\n\t\t\tonChange(editor.getValue());\r\n\t\t});\r\n\t};\r\n\r\n\tconst onFormatClick = () => {\r\n\t\t// get current value from editor instance\r\n\t\tconst unformatted = editorRef.current.getValue();\r\n\t\t// format that value\r\n\t\tconst formatted = prettier\r\n\t\t\t.format(unformatted, {\r\n\t\t\t\tparser: \"babel\",\r\n\t\t\t\tplugins: [ parser ],\r\n\t\t\t\tuseTabs: true,\r\n\t\t\t\tsemi: true\r\n\t\t\t})\r\n\t\t\t// remove new line added by prettier\r\n\t\t\t.replace(/\\n$/, \"\");\r\n\t\t// set formatted value back into the editor\r\n\t\teditorRef.current.setValue(formatted);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"editor-wrapper\">\r\n\t\t\t<Button icon animated=\"fade\" labelPosition=\"right\" className=\"button-format\" onClick={onFormatClick}>\r\n\t\t\t\t<Button.Content visible className=\"text-center\">\r\n\t\t\t\t\t<Icon name=\"paint brush\" />\r\n\t\t\t\t</Button.Content>\r\n\t\t\t\t<Button.Content hidden>Format</Button.Content>\r\n\t\t\t</Button>\r\n\t\t\t<Editor\r\n\t\t\t\tonMount={onEditorMount}\r\n\t\t\t\tvalue={initialValue}\r\n\t\t\t\ttheme=\"vs-dark\"\r\n\t\t\t\tlanguage=\"javascript\"\r\n\t\t\t\theight=\"100%\"\r\n\t\t\t\toptions={{\r\n\t\t\t\t\twordWrap: \"on\",\r\n\t\t\t\t\tminimap:\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tenabled: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\tshowUnused: false,\r\n\t\t\t\t\tfolding: false,\r\n\t\t\t\t\tlineNumbersMinChars: 3,\r\n\t\t\t\t\tfontSize: 16,\r\n\t\t\t\t\tscrollBeyondLastLine: false,\r\n\t\t\t\t\tautomaticLayout: true\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CodeEditor;\r\n","import \"./preview.css\";\r\nimport { useRef, useEffect } from \"react\";\r\n\r\ninterface PreviewProps {\r\n\tcode: string;\r\n\tbundleError: string;\r\n}\r\n\r\n// setup event listener for message and eval the message (bundled code)\r\n// embed this as inner html in iframe using srcdoc attribute\r\nconst html = `\r\n    <html>\r\n        <head></head>\r\n        <body>\r\n            <div id=\"root\"></div>\r\n            <script>\r\n\t\t\t\tconst handleError = (err) => {\r\n\t\t\t\t\tconst root = document.getElementById(\"root\");\r\n\t\t\t\t\troot.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t};\r\n\t\t\t\twindow.addEventListener(\"error\", (event) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\thandleError(event.error);\r\n\t\t\t\t});\r\n                window.addEventListener(\"message\", (event) => {\r\n                    try {\r\n                        eval(event.data);\r\n                    } catch (err) {\r\n                        handleError(err);\r\n                    }\r\n                }, false)\r\n            </script>\r\n        </body>\r\n    </html>\r\n`;\r\n\r\nconst Preview = ({ code, bundleError }: PreviewProps) => {\r\n\tconst iframe = useRef<any>();\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// update srcdoc of iframe to default state to prevent user from deleting html structure by any chance\r\n\t\t\tiframe.current.srcdoc = html;\r\n\t\t\t// slightly delay to allow update of srcdoc first\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// pass bundled code into iframe element via a ref\r\n\t\t\t\tiframe.current.contentWindow.postMessage(code, \"*\");\r\n\t\t\t}, 50);\r\n\t\t},\r\n\t\t[ code ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"preview-wrapper\">\r\n\t\t\t<iframe title=\"code preview\" ref={iframe} sandbox=\"allow-scripts\" srcDoc={html} />\r\n\t\t\t{bundleError && (\r\n\t\t\t\t<div className=\"preview-error\">\r\n\t\t\t\t\t<h3>Compilation Error</h3>\r\n\t\t\t\t\t{bundleError}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Preview;\r\n","import \"./resizable.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { ResizableBox, ResizableBoxProps } from \"react-resizable\";\r\n\r\ninterface ResizableProps {\r\n\tdirection: \"horizontal\" | \"vertical\";\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nconst Resizable = ({ direction, children }: ResizableProps) => {\r\n\tconst [ innerWidth, setInnerWidth ] = useState(window.innerWidth);\r\n\tconst [ innerHeight, setInnerHeight ] = useState(window.innerHeight);\r\n\tconst [ width, setWidth ] = useState(window.innerWidth * 0.75);\r\n\tlet resizableAttr: ResizableBoxProps;\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\t// debounce\r\n\t\t\tlet timer: any;\r\n\t\t\tconst listener = () => {\r\n\t\t\t\tif (timer) {\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t}\r\n\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\t// update states with current window width and height\r\n\t\t\t\t\tsetInnerWidth(window.innerWidth);\r\n\t\t\t\t\tsetInnerHeight(window.innerHeight);\r\n\t\t\t\t\tif (window.innerWidth * 0.75 < width) {\r\n\t\t\t\t\t\tsetWidth(window.innerWidth * 0.75);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 100);\r\n\t\t\t};\r\n\t\t\twindow.addEventListener(\"resize\", listener);\r\n\t\t\t// cleanup\r\n\t\t\treturn () => {\r\n\t\t\t\twindow.removeEventListener(\"resize\", listener);\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ width ]\r\n\t);\r\n\r\n\tif (direction === \"horizontal\") {\r\n\t\tresizableAttr = {\r\n\t\t\tclassName: \"resize-horizontal\",\r\n\t\t\twidth,\r\n\t\t\theight: Infinity,\r\n\t\t\tresizeHandles: [ \"e\" ],\r\n\t\t\tmaxConstraints: [ innerWidth * 0.75, Infinity ],\r\n\t\t\tminConstraints: [ innerWidth * 0.2, Infinity ],\r\n\t\t\tonResizeStop:\r\n\t\t\t\t(event, data) => {\r\n\t\t\t\t\tsetWidth(data.size.width);\r\n\t\t\t\t}\r\n\t\t};\r\n\t} else {\r\n\t\tresizableAttr = {\r\n\t\t\twidth: Infinity,\r\n\t\t\theight: 400,\r\n\t\t\tresizeHandles: [ \"s\" ],\r\n\t\t\tmaxConstraints: [ Infinity, innerHeight * 0.9 ],\r\n\t\t\tminConstraints: [ Infinity, 100 ]\r\n\t\t};\r\n\t}\r\n\treturn <ResizableBox {...resizableAttr}>{children}</ResizableBox>;\r\n};\r\n\r\nexport default Resizable;\r\n","import { useTypedSelector } from \"./use-typed-selector\";\r\n\r\nexport const useCumulativeCode = (cellId: string) => {\r\n\treturn useTypedSelector((state) => {\r\n\t\t// destructure data and order array from state\r\n\t\tconst { data, order } = state.cells;\r\n\t\t// map over each cell id from order array and return corresponding cell from data array\r\n\t\tconst orderedCells = order.map((id) => data[id]);\r\n\t\tconst showFunc = `\r\n        import _React from \"react\";\r\n        import _ReactDOM from \"react-dom\";\r\n        var show = (value) => {\r\n            const root = document.getElementById(\"root\");\r\n            if (typeof value === \"object\") {\r\n                if (value.$$typeof && value.props) {\r\n                    _ReactDOM.render(value, root)\r\n                } else {\r\n                    root.innerHTML = JSON.stringify(value)\r\n                }\r\n            } else {\r\n                root.innerHTML = value;\r\n            }\r\n        };\r\n        `;\r\n\t\tconst showFuncNoOp = \"var show = () => {}\";\r\n\t\tconst cumulativeCode = [];\r\n\t\tfor (let c of orderedCells) {\r\n\t\t\tif (c.type === \"code\") {\r\n\t\t\t\t// if the id is the current cell's id, which is the cell that the user wants to execute, then push the usuable show function to cumulativeCode\r\n\t\t\t\tif (c.id === cellId) {\r\n\t\t\t\t\tcumulativeCode.push(showFunc);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcumulativeCode.push(showFuncNoOp);\r\n\t\t\t\t}\r\n\t\t\t\tcumulativeCode.push(c.content);\r\n\t\t\t}\r\n\t\t\tif (c.id === cellId) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cumulativeCode;\r\n\t}).join(\"\\n\");\r\n};\r\n","import \"./code-cell.css\";\r\nimport { useEffect } from \"react\";\r\nimport CodeEditor from \"./code-editor\";\r\nimport Preview from \"./preview\";\r\nimport Resizable from \"./resizable\";\r\nimport { Cell } from \"../state\";\r\nimport { useActions } from \"../hooks/use-actions\";\r\nimport { useTypedSelector } from \"../hooks/use-typed-selector\";\r\nimport { Loader, Segment } from \"semantic-ui-react\";\r\nimport { useCumulativeCode } from \"../hooks/use-cumulative-code\";\r\n\r\ninterface CodeCellProps {\r\n\tcell: Cell;\r\n}\r\n\r\nconst CodeCell = ({ cell }: CodeCellProps) => {\r\n\tconst { updateCell, createBundle } = useActions();\r\n\tconst bundle = useTypedSelector(state => state.bundles[cell.id]);\r\n\tconst cumulativeCode = useCumulativeCode(cell.id);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tconst timer = setTimeout(async () => {\r\n\t\t\t\tcreateBundle(cell.id, cumulativeCode);\r\n\t\t\t}, 750);\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t};\r\n\t\t},\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t\t[ cell.id, cumulativeCode, createBundle ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Resizable direction=\"vertical\">\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: \"calc(100% - 10px)\",\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tflexDirection: \"row\"\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Resizable direction=\"horizontal\">\r\n\t\t\t\t\t<CodeEditor\r\n\t\t\t\t\t\tinitialValue={cell.content}\r\n\t\t\t\t\t\tonChange={value => updateCell(cell.id, value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Resizable>\r\n\t\t\t\t{!bundle || bundle.loading ? (\r\n\t\t\t\t\t<Segment>\r\n\t\t\t\t\t\t<Loader active indeterminate>\r\n\t\t\t\t\t\t\tLoading...\r\n\t\t\t\t\t\t</Loader>\r\n\t\t\t\t\t</Segment>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Preview code={bundle.code} bundleError={bundle.err} />\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{/* <Segment>\r\n\t\t\t\t<Loader active indeterminate>\r\n\t\t\t\t\tLoading...\r\n\t\t\t\t</Loader>\r\n\t\t\t</Segment> */}\r\n\t\t</Resizable>\r\n\t);\r\n};\r\n\r\nexport default CodeCell;\r\n","import \"./text-editor.css\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport MDEditor from \"@uiw/react-md-editor\";\r\nimport { Segment } from \"semantic-ui-react\";\r\nimport { Cell } from \"../state\";\r\nimport { useActions } from \"../hooks/use-actions\";\r\n\r\ninterface TextEditorProps {\r\n\tcell: Cell;\r\n}\r\n\r\nconst TextEditor = ({ cell }: TextEditorProps) => {\r\n\tconst ref = useRef<HTMLDivElement | null>(null);\r\n\tconst [ editing, setEditing ] = useState(false);\r\n\tconst { updateCell } = useActions();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst listener = (event: MouseEvent) => {\r\n\t\t\tif (ref.current && event.target && ref.current.contains(event.target as Node)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetEditing(false);\r\n\t\t};\r\n\t\tdocument.addEventListener(\"click\", listener, { capture: true });\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"click\", listener, { capture: true });\r\n\t\t};\r\n\t}, []);\r\n\r\n\tif (editing) {\r\n\t\treturn (\r\n\t\t\t<div className=\"text-editor\" ref={ref}>\r\n\t\t\t\t<MDEditor value={cell.content} onChange={(value) => updateCell(cell.id, value || \"\")} autoFocus />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Segment className=\"text-editor\" onClick={() => setEditing(true)}>\r\n\t\t\t<div className=\"card-content\">\r\n\t\t\t\t<MDEditor.Markdown source={cell.content || \"*Click to edit*\"} />\r\n\t\t\t</div>\r\n\t\t</Segment>\r\n\t);\r\n};\r\n\r\nexport default TextEditor;\r\n","import \"./cell-list-item.css\";\r\nimport { Cell } from \"../state\";\r\nimport ActionBar from \"./action-bar\";\r\nimport CodeCell from \"./code-cell\";\r\nimport TextEditor from \"./text-editor\";\r\n\r\ninterface CellListItemProps {\r\n\tcell: Cell;\r\n}\r\nconst CellListItem = ({ cell }: CellListItemProps) => {\r\n\treturn (\r\n\t\t<div className=\"cell-list-item\">\r\n\t\t\t<div className=\"action-bar-wrapper\">\r\n\t\t\t\t<ActionBar id={cell.id} />\r\n\t\t\t</div>\r\n\t\t\t{cell.type === \"code\" ? <CodeCell cell={cell} /> : <TextEditor cell={cell} />}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CellListItem;\r\n","import \"./cell-list.css\";\r\nimport { useTypedSelector } from \"../hooks/use-typed-selector\";\r\nimport AddCell from \"./add-cell\";\r\nimport CellListItem from \"./cell-list-item\";\r\n\r\nconst CellList = () => {\r\n\t// extract state.cells.order and .data from store\r\n\t// map over each cell id in order array and return the corresponding cells from data\r\n\t// cells variable is an array of cells in order\r\n\tconst cells = useTypedSelector(({ cells: { order, data } }) => order.map((id) => data[id]));\r\n\t// map over each cell in cells, and render a CellListItem for each cell\r\n\tconst renderedCells = cells.map((cell) => {\r\n\t\treturn (\r\n\t\t\t<div key={cell.id}>\r\n\t\t\t\t<CellListItem cell={cell} />\r\n\t\t\t\t<AddCell previousCellId={cell.id} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div className=\"cell-list\">\r\n\t\t\t<AddCell forceVisible={cells.length === 0} previousCellId={null} />\r\n\t\t\t{renderedCells}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CellList;\r\n","import \"semantic-ui-css/semantic.min.css\";\r\nimport \"./index.css\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./state\";\r\nimport CellList from \"./components/cell-list\";\r\n\r\nconst App = () => {\r\n\treturn (\r\n\t\t<Provider store={store}>\r\n\t\t\t<div>\r\n\t\t\t\t<CellList />\r\n\t\t\t</div>\r\n\t\t</Provider>\r\n\t);\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"]}}