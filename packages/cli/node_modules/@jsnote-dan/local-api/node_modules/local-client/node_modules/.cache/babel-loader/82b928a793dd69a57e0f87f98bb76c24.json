{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _excluded = [\"prefixCls\", \"className\", \"source\", \"style\", \"onScroll\", \"onMouseOver\", \"warpperElement\"];\nimport React, { useImperativeHandle } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings';\nimport rehypeRaw from 'rehype-raw'; // @ts-ignore\n\nimport rehypePrism from '@mapbox/rehype-prism';\nimport rehypeRewrite from 'rehype-rewrite';\nimport \"./styles/markdown.css\";\nimport \"./styles/markdowncolor.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar octiconLink = {\n  type: 'element',\n  tagName: 'svg',\n  properties: {\n    class: 'octicon octicon-link',\n    viewBox: '0 0 16 16',\n    version: '1.1',\n    width: '16',\n    height: '16',\n    ariaHidden: 'true'\n  },\n  children: [{\n    type: 'element',\n    tagName: 'path',\n    children: [],\n    properties: {\n      fillRule: 'evenodd',\n      d: 'M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'\n    }\n  }]\n};\n\nvar rehypeRewriteHandle = (node, index, parent) => {\n  if (node.type === 'element' && parent && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName)) {\n    var child = node.children && node.children[0];\n\n    if (child && child.properties && child.properties.ariaHidden === 'true') {\n      child.properties = _extends({\n        class: 'anchor'\n      }, child.properties);\n      child.children = [octiconLink];\n    }\n  }\n};\n\nexport default /*#__PURE__*/React.forwardRef((props, ref) => {\n  var {\n    prefixCls = 'wmde-markdown wmde-markdown-color',\n    className,\n    source,\n    style,\n    onScroll,\n    onMouseOver,\n    warpperElement = {}\n  } = props,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var mdp = /*#__PURE__*/React.createRef();\n  useImperativeHandle(ref, () => _extends({}, props, {\n    mdp\n  }), [mdp, props]);\n  var cls = (prefixCls || '') + \" \" + (className || '');\n  return /*#__PURE__*/_jsx(\"div\", _extends({\n    ref: mdp,\n    onScroll: onScroll,\n    onMouseOver: onMouseOver\n  }, warpperElement, {\n    className: cls,\n    style: style,\n    children: /*#__PURE__*/_jsx(ReactMarkdown, _extends({}, other, {\n      rehypePlugins: [[rehypePrism, {\n        ignoreMissing: true\n      }], slug, headings, [rehypeRewrite, rehypeRewriteHandle], rehypeRaw, ...(other.rehypePlugins || [])],\n      remarkPlugins: [...(other.remarkPlugins || []), gfm],\n      children: source || ''\n    }))\n  }));\n});","map":{"version":3,"sources":["../src/index.tsx"],"names":["octiconLink","type","tagName","properties","class","viewBox","version","width","height","ariaHidden","children","fillRule","d","rehypeRewriteHandle","node","parent","child","prefixCls","warpperElement","other","mdp","React","useImperativeHandle","cls","className","onMouseOver","ignoreMissing","source"],"mappings":"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","sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport { Root, Element, ElementContent } from 'hast';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings'\nimport rehypeRaw from 'rehype-raw';\n// @ts-ignore\nimport rehypePrism from '@mapbox/rehype-prism';\nimport rehypeRewrite from 'rehype-rewrite';\nimport './styles/markdown.less';\nimport './styles/markdowncolor.less';\n\nconst octiconLink: Element = {\n  type: 'element',\n  tagName: 'svg',\n  properties: {\n    class: 'octicon octicon-link',\n    viewBox: '0 0 16 16',\n    version: '1.1',\n    width: '16',\n    height: '16',\n    ariaHidden: 'true',\n  },\n  children: [\n    {\n      type: 'element',\n      tagName: 'path',\n      children: [],\n      properties: {\n        fillRule: 'evenodd',\n        d: 'M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z',\n      }\n    }\n  ]\n}\n\nconst rehypeRewriteHandle = (node: ElementContent, index: number | null, parent: Root | Element | null) => {\n  if (node.type === 'element' && parent && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName)) {\n    const child = node.children && node.children[0] as Element;\n    if (child && child.properties && child.properties.ariaHidden === 'true') {\n      child.properties = { class: 'anchor', ...child.properties };\n      child.children = [ octiconLink ];\n    }\n  }\n}\n\nexport type MarkdownPreviewProps = {\n  prefixCls?: string;\n  className?: string;\n  source?: string;\n  style?: React.CSSProperties;\n  warpperElement?: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  onMouseOver?: (e: React.MouseEvent<HTMLDivElement>) => void;\n} & Omit<Options, 'children'>;\n\nexport type MarkdownPreviewRef = {\n  mdp: React.RefObject<HTMLDivElement>;\n} & MarkdownPreviewProps;\n\nexport default React.forwardRef<MarkdownPreviewRef, MarkdownPreviewProps>((props, ref) => {\n  const { prefixCls = 'wmde-markdown wmde-markdown-color', className, source, style, onScroll, onMouseOver, warpperElement = {}, ...other  } = props;\n  const mdp = React.createRef<HTMLDivElement>();\n  useImperativeHandle(ref, () => ({ ...props, mdp }), [mdp, props]);\n  const cls = `${prefixCls || ''} ${className || ''}`;\n  return (\n    <div ref={mdp} onScroll={onScroll} onMouseOver={onMouseOver} {...warpperElement} className={cls} style={style}>\n      <ReactMarkdown\n        {...other}\n        rehypePlugins={[[rehypePrism, { ignoreMissing: true }], slug, headings, [rehypeRewrite, rehypeRewriteHandle], rehypeRaw, ...(other.rehypePlugins || [])]}\n        remarkPlugins={[ ...(other.remarkPlugins || []), gfm ]}\n        children={source || ''}\n      />\n    </div>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}